
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>读取数据 &#8212; My R Learning Book</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "light";
  </script>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/bootstrap.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />

  
  <link href="../_static/vendor/fontawesome/6.5.1/css/all.min.css?digest=8d27b9dea8ad943066ae" rel="stylesheet" />
  <link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-solid-900.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-brands-400.woff2" />
<link rel="preload" as="font" type="font/woff2" crossorigin href="../_static/vendor/fontawesome/6.5.1/webfonts/fa-regular-400.woff2" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=b76e3c8a" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=384b581d" />
    <link rel="stylesheet" type="text/css" href="../_static/togglebutton.css?v=13237357" />
    <link rel="stylesheet" type="text/css" href="../_static/copybutton.css?v=76b2166b" />
    <link rel="stylesheet" type="text/css" href="../_static/mystnb.4510f1fc1dee50b3e5859aac5469c37c29e427902b24a333a5f9fcb2f0b3ac41.css" />
    <link rel="stylesheet" type="text/css" href="../_static/sphinx-thebe.css?v=4fa983c6" />
    <link rel="stylesheet" type="text/css" href="../_static/design-style.1e8bd061cd6da7fc9cf755528e8ffc24.min.css?v=0a3b3ea7" />
  
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae" />
  <script src="../_static/vendor/fontawesome/6.5.1/js/all.min.js?digest=8d27b9dea8ad943066ae"></script>

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/clipboard.min.js?v=a7894cd8"></script>
    <script src="../_static/copybutton.js?v=f281be69"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=efea14e4"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="../_static/togglebutton.js?v=4a39c7ea"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../_static/design-tabs.js?v=36754332"></script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script async="async" src="../_static/sphinx-thebe.js?v=c100c467"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script>const THEBE_JS_URL = "https://unpkg.com/thebe@0.8.2/lib/index.js"; const thebe_selector = ".thebe,.cell"; const thebe_selector_input = "pre"; const thebe_selector_output = ".output, .cell_output"</script>
    <script>window.MathJax = {"options": {"processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
    <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'content/R语言学习2-语法函数2-数据处理dplyr包';</script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <a id="pst-skip-link" class="skip-link" href="#main-content">Skip to main content</a>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>
    Back to top
  </button>

  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__primary"
          id="__primary"/>
  <label class="overlay overlay-primary" for="__primary"></label>
  
  <input type="checkbox"
          class="sidebar-toggle"
          name="__secondary"
          id="__secondary"/>
  <label class="overlay overlay-secondary" for="__secondary"></label>
  
  <div class="search-button__wrapper">
    <div class="search-button__overlay"></div>
    <div class="search-button__search-container">
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         id="search-input"
         placeholder="Search this book..."
         aria-label="Search this book..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form></div>
  </div>
  
    <header class="bd-header navbar navbar-expand-lg bd-navbar">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <div class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  

<a class="navbar-brand logo" href="../intro.html">
  
  
  
  
  
  
    <p class="title logo__title">My R Learning Book</p>
  
</a></div>
        <div class="sidebar-primary-item">

 <script>
 document.write(`
   <button class="btn navbar-btn search-button-field search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass"></i>
    <span class="search-button__default-text">Search</span>
    <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
   </button>
 `);
 </script></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        
        <ul class="nav bd-sidenav bd-sidenav__home-link">
            <li class="toctree-l1">
                <a class="reference internal" href="../intro.html">
                    Welcome to your Jupyter Book
                </a>
            </li>
        </ul>
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../markdown.html">Markdown Files</a></li>
<li class="toctree-l1"><a class="reference internal" href="../notebooks.html">Content with notebooks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../markdown-notebooks.html">Notebooks with MyST Markdown</a></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
  </div>
  
  <div id="rtd-footer-container"></div>


      </div>
      
      <main id="main-content" class="bd-main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><label class="sidebar-toggle primary-toggle btn btn-sm" for="__primary" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</label></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-launch-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Launch interactive content">
    <i class="fas fa-rocket"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="https://mybinder.org/v2/gh/executablebooks/jupyter-book/master?urlpath=tree/content/R语言学习2-语法函数2-数据处理dplyr包.ipynb" target="_blank"
   class="btn btn-sm dropdown-item"
   title="Launch onBinder"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  
    <img src="../_static/images/logo_binder.svg">
  </span>
<span class="btn__text-container">Binder</span>
</a>
</li>
      
  </ul>
</div>






<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/content/R语言学习2-语法函数2-数据处理dplyr包.ipynb" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.ipynb</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<script>
document.write(`
  <button class="btn btn-sm navbar-btn theme-switch-button" title="light/dark" aria-label="light/dark" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="theme-switch nav-link" data-mode="light"><i class="fa-solid fa-sun fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="dark"><i class="fa-solid fa-moon fa-lg"></i></span>
    <span class="theme-switch nav-link" data-mode="auto"><i class="fa-solid fa-circle-half-stroke fa-lg"></i></span>
  </button>
`);
</script>


<script>
document.write(`
  <button class="btn btn-sm navbar-btn search-button search-button__button" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
  </button>
`);
</script>
<label class="sidebar-toggle secondary-toggle btn btn-sm" for="__secondary"title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</label>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>读取数据</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">读取数据</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">数据科学中的文件管理</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#here"><code class="docutils literal notranslate"><span class="pre">here</span></code>宏包</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">数据处理</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mutata">1 新增一列 <code class="docutils literal notranslate"><span class="pre">mutata()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">2 管道 <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mutate">3 向量函数与<code class="docutils literal notranslate"><span class="pre">mutate()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">4 保存为新的数据框</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select">5 选取列 <code class="docutils literal notranslate"><span class="pre">select()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rename">6 修改列名 <code class="docutils literal notranslate"><span class="pre">rename()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filter">7 筛选<code class="docutils literal notranslate"><span class="pre">filter()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summarise">8 统计汇总<code class="docutils literal notranslate"><span class="pre">summarise()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#group-by">9 分组统计 <code class="docutils literal notranslate"><span class="pre">group_by()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arrange">10 排序 <code class="docutils literal notranslate"><span class="pre">arrange()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#left-join">11 左联结 <code class="docutils literal notranslate"><span class="pre">left_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#right-join">12 右联结 <code class="docutils literal notranslate"><span class="pre">right_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#full-join">13 满联结 <code class="docutils literal notranslate"><span class="pre">full_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inner-join">14 内联结<code class="docutils literal notranslate"><span class="pre">inner_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#semi-join-x-y-anti-join-x-y">15 筛选联结 <code class="docutils literal notranslate"><span class="pre">semi_join(x,y)</span></code> <code class="docutils literal notranslate"><span class="pre">anti_join(x,y)</span></code></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dplyr"><code class="docutils literal notranslate"><span class="pre">dplyr</span></code>进阶</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">导入数据</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">更多应用</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#separate">separate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unite">unite</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distinct">distinct</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#na">有关NA的计算</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">拓展函数</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">强制转换</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#across"><code class="docutils literal notranslate"><span class="pre">across()</span></code>函数</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">数据中心化</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">数据标准化</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">多列多个统计函数</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">数据规整</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tidy-data"><code class="docutils literal notranslate"><span class="pre">tidy</span> <span class="pre">data</span></code>原则</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fill"><code class="docutils literal notranslate"><span class="pre">fill()</span></code>缺失值填充</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#expand-complete"><code class="docutils literal notranslate"><span class="pre">expand()</span> </code>与 <code class="docutils literal notranslate"><span class="pre">complete()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#expand-grid-crossing"><code class="docutils literal notranslate"><span class="pre">expand_grid()</span> </code>与<code class="docutils literal notranslate"> <span class="pre">crossing()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#separate-unite"><code class="docutils literal notranslate"><span class="pre">separate()</span></code>与<code class="docutils literal notranslate"><span class="pre">unite()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drop-na-replace-na">删除缺失值所在行<code class="docutils literal notranslate"><span class="pre">drop_na()</span></code>与<code class="docutils literal notranslate"><span class="pre">replace_na()</span></code></a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="id1">
<h1>读取数据<a class="headerlink" href="#id1" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>在学习R语言过程中，除了使用内置的数据集外，我们更多的需要导入外部数据</p></li>
</ul>
<section id="id2">
<h2>数据科学中的文件管理<a class="headerlink" href="#id2" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>把项目所需的文件（代码、数据、图片等），放在一个文件夹里</p></li>
</ul>
<ul class="simple">
<li><p>读取文件</p>
<ul>
<li><p>事实上，R语言提供了很多读取数据的函数。下表列出了常见文件格式的读取方法</p></li>
</ul>
</li>
</ul>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>文件格式</p></th>
<th class="head"><p>R函数</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>txt</p></td>
<td><p>read.table()</p></td>
</tr>
<tr class="row-odd"><td><p>.csv</p></td>
<td><p>read.csv() and readr::read_csv()</p></td>
</tr>
<tr class="row-even"><td><p>.xls and .xlsx</p></td>
<td><p>readxl::read_excel() and openxlsx::read.xlsx()</p></td>
</tr>
<tr class="row-odd"><td><p>.sav(SPSS files)</p></td>
<td><p>haven::read_sav() and foreign::read.spss()</p></td>
</tr>
<tr class="row-even"><td><p>.Rdata or rda</p></td>
<td><p>load()</p></td>
</tr>
<tr class="row-odd"><td><p>.rds</p></td>
<td><p>readRDS() and readr::read_rds()</p></td>
</tr>
<tr class="row-even"><td><p>.dta</p></td>
<td><p>haven::read_dta() and haven::read_stata()</p></td>
</tr>
<tr class="row-odd"><td><p>.sas7bdat(SAS files)</p></td>
<td><p>haven::read_sas()</p></td>
</tr>
<tr class="row-even"><td><p>Internet</p></td>
<td><p>download.file()</p></td>
</tr>
</tbody>
</table>
</section>
<section id="here">
<h2><code class="docutils literal notranslate"><span class="pre">here</span></code>宏包<a class="headerlink" href="#here" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>强大的<code class="docutils literal notranslate"><span class="pre">here</span></code>宏包，<code class="docutils literal notranslate"><span class="pre">here()</span></code>会告诉我们当前所在的目录</p></li>
<li><p>指向某个文件的路径信息</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">here</span></code>宏包的好处还在于，在不同的电脑和文件结构下，代码都能运行</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">here</span><span class="o">::</span><span class="nf">here</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'/public/home/sll/mybook/content'</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">here</span><span class="o">::</span><span class="nf">here</span><span class="p">(</span><span class="s">&quot;software&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;smoove&quot;</span><span class="p">)</span>
<span class="n">d</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">read.table</span><span class="p">(</span><span class="n">file</span><span class="o">=</span><span class="w"> </span><span class="s">&quot;./data/txt_file.txt&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">header</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">'/public/home/sll/mybook/content/software/smoove'</div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message in file(file, &quot;rt&quot;):
“无法打开文件&#39;./data/txt_file.txt&#39;: 没有那个文件或目录”
</pre></div>
</div>
<div class="output traceback highlight-ipythontb notranslate"><div class="highlight"><pre><span></span><span class="n">Error</span> <span class="ow">in</span> <span class="n">file</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">):</span> <span class="n">无法打开链结</span>
<span class="ne">Traceback</span>:

<span class="mi">1</span><span class="o">.</span> <span class="n">read</span><span class="o">.</span><span class="n">table</span><span class="p">(</span><span class="n">file</span> <span class="o">=</span> <span class="s2">&quot;./data/txt_file.txt&quot;</span><span class="p">,</span> <span class="n">header</span> <span class="o">=</span> <span class="n">TRUE</span><span class="p">)</span>
<span class="mi">2</span><span class="o">.</span> <span class="n">file</span><span class="p">(</span><span class="n">file</span><span class="p">,</span> <span class="s2">&quot;rt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="id3">
<h1>数据处理<a class="headerlink" href="#id3" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>数据处理的工具<code class="docutils literal notranslate"><span class="pre">dplyr</span></code>宏包–tidyverse里的“瑞士军刀”</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">dplyr</span></code>定义了数据处理的规范语法，其中主要包含以下10个主要的函数</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code>, <code class="docutils literal notranslate"><span class="pre">select()</span></code>, <code class="docutils literal notranslate"><span class="pre">rename()</span></code> , <code class="docutils literal notranslate"><span class="pre">filter()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code>, <code class="docutils literal notranslate"><span class="pre">group_by()</span></code>, <code class="docutils literal notranslate"><span class="pre">arrange()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left_join()</span></code>, <code class="docutils literal notranslate"><span class="pre">right_join()</span></code>， <code class="docutils literal notranslate"><span class="pre">full_join()</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">if_else()</span></code> <code class="docutils literal notranslate"><span class="pre">case_when()</span></code> <code class="docutils literal notranslate"><span class="pre">everything()</span></code>函数</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">count()</span></code></p>
<ul>
<li><p>对给定条件的某列进行计数，<code class="docutils literal notranslate"><span class="pre">count(x,</span> <span class="pre">condition)</span></code>相当于<code class="docutils literal notranslate"><span class="pre">filter(x,condition)</span> <span class="pre">%&gt;%</span>&#160; <span class="pre">group_by(x)</span> <span class="pre">%&gt;%</span>&#160; <span class="pre">summarise(n=n())</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">across()</span></code></p>
<ul>
<li><p>对给定的某些列赋予函数计算</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">across(.cols</span> <span class="pre">=</span> <span class="pre">everything(),</span> <span class="pre">.fns</span> <span class="pre">=</span> <span class="pre">NULL,</span> <span class="pre">...,</span> <span class="pre">.names</span> <span class="pre">=</span> <span class="pre">NULL)</span></code></p>
<ul>
<li><p>用在 <code class="docutils literal notranslate"><span class="pre">mutate()</span></code> 和<code class="docutils literal notranslate"><span class="pre">summarise()</span></code> 函数里面</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">across()</span></code> 对<strong>多列</strong>执行<strong>相同</strong>的函数操作，返回数据框</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">list()</span></code>列出多个要使用的函数及对应列名</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">dplyr</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">data.frame</span><span class="p">(</span>
<span class="n">name</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Carol&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Carol&quot;</span><span class="p">),</span>
<span class="n">type</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;math&quot;</span><span class="p">),</span>
<span class="n">score</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">80</span><span class="p">,</span><span class="w"> </span><span class="m">60</span><span class="p">,</span><span class="w"> </span><span class="m">70</span><span class="p">,</span><span class="w"> </span><span class="m">69</span><span class="p">,</span><span class="w"> </span><span class="m">80</span><span class="p">,</span><span class="w"> </span><span class="m">90</span><span class="p">))</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td></tr>
</tbody>
</table>
</div></div>
</div>
<section id="mutata">
<h2>1 新增一列 <code class="docutils literal notranslate"><span class="pre">mutata()</span></code><a class="headerlink" href="#mutata" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code>函数的功能是给数据框新增一列，使用语法为 <code class="docutils literal notranslate"><span class="pre">mutate(.data</span> <span class="pre">=</span> <span class="pre">df,</span> <span class="pre">name</span> <span class="pre">=</span> <span class="pre">value)</span></code></p>
<ul>
<li><p>第一个参数<code class="docutils literal notranslate"><span class="pre">.data</span></code>，接受要处理的数据框，比如这里的<code class="docutils literal notranslate"><span class="pre">df</span></code></p></li>
<li><p>第二个参数是<code class="docutils literal notranslate"><span class="pre">Name-value</span></code>对, 比如<code class="docutils literal notranslate"><span class="pre">extra</span> <span class="pre">=</span> <span class="pre">reward</span></code>，</p>
<ul>
<li><p>等号左边，是我们为新增的一列取的名字，比如这里的<code class="docutils literal notranslate"><span class="pre">extra</span></code>，因为数据框每一列都是要有名字的；</p></li>
<li><p>等号右边，是打算并入数据框的<strong>向量</strong>，比如这里的<code class="docutils literal notranslate"><span class="pre">reward</span></code>，它是装着学生成绩的向量。注意，向量的长度，</p>
<ul>
<li><p>要么与数据框的行数等长，比如这里向量长度为6；</p></li>
<li><p>要么长度为1，即，新增的这一列所有的值都是一样的(<em>循环补齐机制</em>)。</p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<p><img alt="image.png" src="../_images/dplyr-mutate.png" /></p>
<ul class="simple">
<li><p>因为<code class="docutils literal notranslate"><span class="pre">mutate()</span></code>函数处理的是数据框，并且固定放置在第一位置上（几乎所有<code class="docutils literal notranslate"><span class="pre">dplyr</span></code>的函数都是这样要求的），所以这个<code class="docutils literal notranslate"><span class="pre">.data</span></code>可以偷懒不写，直接写<code class="docutils literal notranslate"><span class="pre">mutate(df,</span> <span class="pre">extra</span> <span class="pre">=</span> <span class="pre">reward)</span></code>。另外，如果想同时新增多个列，只需要提供多个<code class="docutils literal notranslate"><span class="pre">Name-value</span></code>对即可</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">reward</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">)</span>
<span class="nf">mutate</span><span class="p">(</span><span class="n">df</span><span class="p">,</span><span class="w"> </span><span class="n">extra</span><span class="o">=</span><span class="n">reward</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 新增多列</span>
<span class="nf">mutate</span><span class="p">(</span><span class="n">df</span><span class="p">,</span>
<span class="w">      </span><span class="n">extra1</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">9</span><span class="p">,</span><span class="w"> </span><span class="m">8</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="m">6</span><span class="p">),</span>
<span class="w">      </span><span class="n">extra2</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">),</span>
<span class="w">      </span><span class="n">extra3</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8</span><span class="p">)</span>
<span class="w">      </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 6</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra1</th><th scope=col>extra2</th><th scope=col>extra3</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>1</td><td>8</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td><td>2</td><td>8</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td><td>3</td><td>8</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td><td>3</td><td>8</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>2</td><td>8</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>1</td><td>8</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id4">
<h2>2 管道 <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code><a class="headerlink" href="#id4" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>Windows系统中可以通过<code class="docutils literal notranslate"><span class="pre">Ctrl</span> <span class="pre">+</span> <span class="pre">Shift</span> <span class="pre">+</span> <span class="pre">M</span> </code>快捷键产生<code class="docutils literal notranslate"> <span class="pre">%&gt;%</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">10</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">sum</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">55</div></div>
</div>
<ul class="simple">
<li><p>这条语句的意思是<code class="docutils literal notranslate"><span class="pre">f(x)</span></code> 写成 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">%&gt;%</span> <span class="pre">f()</span></code>，这里向量 <code class="docutils literal notranslate"><span class="pre">c(1:10)</span></code> 通过管道操作符 <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code> ，传递到函数<code class="docutils literal notranslate"><span class="pre">sum()</span></code>的第一个参数位置，即<code class="docutils literal notranslate"><span class="pre">sum(c(1:10))</span></code></p></li>
<li><p><img alt="image.png" src="../_images/pipe1.png" /></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">mutate</span><span class="p">(</span><span class="n">extra</span><span class="o">=</span><span class="n">reward</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="mutate">
<h2>3 向量函数与<code class="docutils literal notranslate"><span class="pre">mutate()</span></code><a class="headerlink" href="#mutate" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code>函数的本质还是向量函数和向量化操作，只不过是换作在数据框中完成，这样更能形成“数据框进、数据框出”的思维，方便快捷地构思并统计任务</p></li>
<li><p>在<code class="docutils literal notranslate"><span class="pre">mutate()</span></code>中引用数据框的某一列名，实际上是引用了列名对应的<strong>整个向量</strong>, 所以，这里我们传递<code class="docutils literal notranslate"><span class="pre">score</span></code>到<code class="docutils literal notranslate"><span class="pre">calc_square()</span></code>，就是把整个<code class="docutils literal notranslate"><span class="pre">score</span></code>向量传递给<code class="docutils literal notranslate"><span class="pre">calc_square()</span></code>.</p>
<ul>
<li><p><img alt="image.png" src="../_images/mutate-calc-square1.png" /></p></li>
</ul>
</li>
<li><p>几何算符（这里是平方）是向量化的，因此<code class="docutils literal notranslate"><span class="pre">calc_square()</span></code>会对输入的<code class="docutils literal notranslate"><span class="pre">score</span></code>向量，返回一个等长的向量。</p>
<ul>
<li><p><img alt="image-2.png" src="../_images/mutate-calc-square2.png" /></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">mutate()</span></code>拿到这个新的向量后，就在原有数据框中添加新的一列<code class="docutils literal notranslate"><span class="pre">new_col</span></code></p>
<ul>
<li><p><img alt="image-3.png" src="../_images/mutate-calc-square3.png" /></p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">calc_square</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">){</span>
<span class="w">    </span><span class="n">x</span><span class="o">^</span><span class="m">2</span>
<span class="p">}</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">mutate</span><span class="p">(</span><span class="n">new_col</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">calc_square</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>new_col</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>6400</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>3600</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>4900</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>4761</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>6400</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>8100</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id5">
<h2>4 保存为新的数据框<a class="headerlink" href="#id5" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reward</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">extra</span><span class="p">)</span>
<span class="n">df_new</span>

<span class="n">df_new2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">extra</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">reward</span><span class="p">,</span>
<span class="w">        </span><span class="n">total</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">extra</span><span class="p">)</span>
<span class="n">df_new2</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td><td>65</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td><td>65</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="select">
<h2>5 选取列 <code class="docutils literal notranslate"><span class="pre">select()</span></code><a class="headerlink" href="#select" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">select()</span></code>顾名思义选择，就是选择数据框的某一列，或者某几列。</p></li>
<li><p>数据框进数据框出是<code class="docutils literal notranslate"><span class="pre">dplyr</span></code>函数的第二个特点</p></li>
<li><p>删除某列，可以在变量前面加 <code class="docutils literal notranslate"><span class="pre">-</span></code> 或者 <code class="docutils literal notranslate"><span class="pre">!</span></code>，两者的结果是一样的。</p></li>
<li><p>也可以通过位置索引进行选取</p></li>
<li><p>如果要选取数据框的列很多，我们也可以先观察列名的特征，用特定的函数进行选取</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">extra</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>2</td></tr>
	<tr><td>Alice</td><td>5</td></tr>
	<tr><td>Bob  </td><td>9</td></tr>
	<tr><td>Bob  </td><td>8</td></tr>
	<tr><td>Carol</td><td>5</td></tr>
	<tr><td>Carol</td><td>6</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="o">-</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 4</caption>
<thead>
	<tr><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>math   </td><td>60</td><td>5</td><td>65</td></tr>
	<tr><td>english</td><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>math   </td><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">,</span><span class="m">3</span><span class="p">)</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="m">1</span><span class="o">:</span><span class="m">3</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 如果要选取数据框的列很多，我们也可以先观察列名的特征，用特定的函数进行选取</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">))</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">ends_with</span><span class="p">(</span><span class="s">&quot;e&quot;</span><span class="p">))</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">contains</span><span class="p">(</span><span class="s">&quot;score&quot;</span><span class="p">))</span><span class="w">  </span><span class="c1"># 列名包含</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.character</span><span class="p">))</span><span class="w"> </span><span class="c1"># 通过变量的类型来选取</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">))</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">)</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&quot;t&quot;</span><span class="p">))</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="o">!</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&quot;s&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 1</caption>
<thead>
	<tr><th scope=col>score</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>80</td></tr>
	<tr><td>60</td></tr>
	<tr><td>70</td></tr>
	<tr><td>69</td></tr>
	<tr><td>80</td></tr>
	<tr><td>90</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 1</caption>
<thead>
	<tr><th scope=col>score</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>80</td></tr>
	<tr><td>60</td></tr>
	<tr><td>70</td></tr>
	<tr><td>69</td></tr>
	<tr><td>80</td></tr>
	<tr><td>90</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td></tr>
	<tr><td>Alice</td><td>math   </td></tr>
	<tr><td>Bob  </td><td>english</td></tr>
	<tr><td>Bob  </td><td>math   </td></tr>
	<tr><td>Carol</td><td>english</td></tr>
	<tr><td>Carol</td><td>math   </td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 3</caption>
<thead>
	<tr><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>60</td><td>5</td><td>65</td></tr>
	<tr><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>90</td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 1</caption>
<thead>
	<tr><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>82</td></tr>
	<tr><td>65</td></tr>
	<tr><td>79</td></tr>
	<tr><td>77</td></tr>
	<tr><td>85</td></tr>
	<tr><td>96</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>2</td><td>82</td></tr>
	<tr><td>Alice</td><td>math   </td><td>5</td><td>65</td></tr>
	<tr><td>Bob  </td><td>english</td><td>9</td><td>79</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>8</td><td>77</td></tr>
	<tr><td>Carol</td><td>english</td><td>5</td><td>85</td></tr>
	<tr><td>Carol</td><td>math   </td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="rename">
<h2>6 修改列名 <code class="docutils literal notranslate"><span class="pre">rename()</span></code><a class="headerlink" href="#rename" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>用<code class="docutils literal notranslate"><span class="pre">rename()</span></code>修改列的名字, 具体方法是<code class="docutils literal notranslate"><span class="pre">rename(.data,</span> <span class="pre">new_name</span> <span class="pre">=</span> <span class="pre">old_name)</span></code>，和<code class="docutils literal notranslate"><span class="pre">mutate()</span></code>一样，等号左边是新的变量名，右边是已经存在的变量名（这是<code class="docutils literal notranslate"><span class="pre">dplyr</span></code>函数的第三个特征）</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">select</span><span class="p">(</span><span class="n">name</span><span class="p">,</span><span class="w"> </span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="n">total</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">rename</span><span class="p">(</span><span class="n">total_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">total</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>total_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>82</td></tr>
	<tr><td>Alice</td><td>math   </td><td>65</td></tr>
	<tr><td>Bob  </td><td>english</td><td>79</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>77</td></tr>
	<tr><td>Carol</td><td>english</td><td>85</td></tr>
	<tr><td>Carol</td><td>math   </td><td>96</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="filter">
<h2>7 筛选<code class="docutils literal notranslate"><span class="pre">filter()</span></code><a class="headerlink" href="#filter" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>前面<code class="docutils literal notranslate"><span class="pre">select()</span></code>是<strong>列方向的选择</strong>，而用<code class="docutils literal notranslate"><span class="pre">filter()</span></code>函数，我们可以对数据框<strong>行方向</strong>进行筛选，选出符合特定条件的某些行</p></li>
<li><p><img alt="image.png" src="../_images/dplyr-filter.png" /></p></li>
<li><p><strong>注意，这里<code class="docutils literal notranslate"><span class="pre">filter()</span></code>函数不是字面上“过滤掉”的意思，而是保留符合条件的行</strong>，也就说<code class="docutils literal notranslate"><span class="pre">keep</span></code>，不是<code class="docutils literal notranslate"><span class="pre">drop</span></code>的意思。</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">R</span></code>提供了其他比较关系的算符: <code class="docutils literal notranslate"><span class="pre">&lt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">&gt;=</span></code>, <code class="docutils literal notranslate"><span class="pre">==</span> </code>(equal), <code class="docutils literal notranslate"><span class="pre">!=</span> </code>(not equal), <code class="docutils literal notranslate"><span class="pre">%in%</span></code>, <code class="docutils literal notranslate"><span class="pre">is.na()</span></code> 和 <code class="docutils literal notranslate"><span class="pre">!is.na()</span></code> .</p></li>
<li><p>可以限定多个条件进行筛选，支持逻辑运算符</p></li>
<li><p>可以配合一些函数使用</p></li>
</ul>
<p><code class="docutils literal notranslate"><span class="pre">filter()</span></code>中的逻辑运算符</p>
<table class="table">
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">==</span></code></p></td>
<td><p>Equal to</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;</span></code></p></td>
<td><p>Greater than</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;</span></code></p></td>
<td><p>Less than</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&gt;=</span></code></p></td>
<td><p>Greater than or equal to</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">&lt;=</span></code></p></td>
<td><p>Less than or equal to</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">!=</span></code></p></td>
<td><p>Not equal to</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">%in%</span></code></p></td>
<td><p>in</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">is.na</span></code></p></td>
<td><p>is a missing value (NA)</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">!is.na</span></code></p></td>
<td><p>is not a missing value</p></td>
</tr>
<tr class="row-odd"><td><p><code class="docutils literal notranslate"><span class="pre">&amp;</span></code></p></td>
<td><p>and</p></td>
</tr>
<tr class="row-even"><td><p><code class="docutils literal notranslate"><span class="pre">|</span></code></p></td>
<td><p>or</p></td>
</tr>
</tbody>
</table>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">70</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 3 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">type</span><span class="o">==</span><span class="s">&quot;english&quot;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">75</span><span class="p">)</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">type</span><span class="o">==</span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">75</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 2 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 2 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 1 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Carol</td><td>math</td><td>90</td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="summarise">
<h2>8 统计汇总<code class="docutils literal notranslate"><span class="pre">summarise()</span></code><a class="headerlink" href="#summarise" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">summarise()</span></code>函数非常强大，主要用于统计汇总，往往与其他函数配合使用</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">summarise</span><span class="p">(</span><span class="n">mean_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">summarise</span><span class="p">(</span><span class="n">sd_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sd</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 1 × 1</caption>
<thead>
	<tr><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>74.83333</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 1 × 1</caption>
<thead>
	<tr><th scope=col>sd_score</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>10.59088</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">  </span><span class="n">mean_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">score</span><span class="p">),</span>
<span class="w">  </span><span class="n">median_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">median</span><span class="p">(</span><span class="n">score</span><span class="p">),</span>
<span class="w">  </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">n</span><span class="p">(),</span>
<span class="w">  </span><span class="n">sum</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 1 × 4</caption>
<thead>
	<tr><th scope=col>mean_score</th><th scope=col>median_score</th><th scope=col>n</th><th scope=col>sum</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>74.83333</td><td>75</td><td>6</td><td>449</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="group-by">
<h2>9 分组统计 <code class="docutils literal notranslate"><span class="pre">group_by()</span></code><a class="headerlink" href="#group-by" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>实际运用中，<code class="docutils literal notranslate"><span class="pre">summarise()</span></code>函数往往配合<code class="docutils literal notranslate"><span class="pre">group_by()</span></code>一起使用，即，先分组再统计</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="n">mean_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">total</span><span class="p">),</span>
<span class="w">    </span><span class="n">sd_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">sd</span><span class="p">(</span><span class="n">total</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th><th scope=col>sd_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td><td>12.020815</td></tr>
	<tr><td>Bob  </td><td>78.0</td><td> 1.414214</td></tr>
	<tr><td>Carol</td><td>90.5</td><td> 7.778175</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="arrange">
<h2>10 排序 <code class="docutils literal notranslate"><span class="pre">arrange()</span></code><a class="headerlink" href="#arrange" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">arrange()</span></code>就是按照某个变量进行排序，默认为从小到大排序</p></li>
<li><p>在要排序的变量前加上<code class="docutils literal notranslate"><span class="pre">-</span></code>可改成从大到小排序</p></li>
<li><p>使用<code class="docutils literal notranslate"><span class="pre">desc()</span></code>函数也可实现从大到小排序</p></li>
<li><p>也可对多个变量依次排序</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">arrange</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">arrange</span><span class="p">(</span><span class="o">-</span><span class="n">total</span><span class="p">)</span>
<span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">total</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td><td>65</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td><td>65</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td><td>65</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">arrange</span><span class="p">(</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="nf">desc</span><span class="p">(</span><span class="n">total</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 6 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th><th scope=col>total</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Carol</td><td>english</td><td>80</td><td>5</td><td>85</td></tr>
	<tr><td>Alice</td><td>english</td><td>80</td><td>2</td><td>82</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>9</td><td>79</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>6</td><td>96</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>8</td><td>77</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>5</td><td>65</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="left-join">
<h2>11 左联结 <code class="docutils literal notranslate"><span class="pre">left_join()</span></code><a class="headerlink" href="#left-join" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>实际操作中，会遇到数据框合并的情形</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">left_join(df1,</span> <span class="pre">df2,</span> <span class="pre">by</span> <span class="pre">=</span> <span class="pre">&quot;name&quot;)</span></code>,<code class="docutils literal notranslate"><span class="pre">by</span></code>指定通过哪一列进行合并,合并按照<code class="docutils literal notranslate"><span class="pre">df1</span></code>进行</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">df_new</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="n">mean_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">total</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
<span class="n">df1</span>

<span class="n">df2</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tibble</span><span class="p">(</span>
<span class="w">       </span><span class="n">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Dave&quot;</span><span class="p">),</span>
<span class="w">       </span><span class="n">age</span><span class="w"> </span><span class="o">=</span><span class="w">  </span><span class="nf">c</span><span class="p">(</span><span class="m">12</span><span class="p">,</span><span class="w"> </span><span class="m">13</span><span class="p">,</span><span class="w"> </span><span class="m">14</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">df2</span>
<span class="c1"># 使用 left_join()函数 把两个数据框df1和df2合并连接在一起</span>
<span class="nf">left_join</span><span class="p">(</span><span class="n">df1</span><span class="p">,</span><span class="w"> </span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
<span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">left_join</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td></tr>
	<tr><td>Bob  </td><td>78.0</td></tr>
	<tr><td>Carol</td><td>90.5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>age</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>12</td></tr>
	<tr><td>Bob  </td><td>13</td></tr>
	<tr><td>Dave </td><td>14</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th><th scope=col>age</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td><td>12</td></tr>
	<tr><td>Bob  </td><td>78.0</td><td>13</td></tr>
	<tr><td>Carol</td><td>90.5</td><td>NA</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th><th scope=col>age</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td><td>12</td></tr>
	<tr><td>Bob  </td><td>78.0</td><td>13</td></tr>
	<tr><td>Carol</td><td>90.5</td><td>NA</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="right-join">
<h2>12 右联结 <code class="docutils literal notranslate"><span class="pre">right_join()</span></code><a class="headerlink" href="#right-join" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">right_join(df1,</span> <span class="pre">df2,</span> <span class="pre">by</span> <span class="pre">=</span> <span class="pre">&quot;name&quot;)</span></code>,<code class="docutils literal notranslate"><span class="pre">by</span></code>指定通过哪一列进行合并,合并按照<code class="docutils literal notranslate"><span class="pre">df2</span></code>进行，没有对应信息计为<code class="docutils literal notranslate"><span class="pre">NA</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">right_join</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th><th scope=col>age</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td><td>12</td></tr>
	<tr><td>Bob  </td><td>78.0</td><td>13</td></tr>
	<tr><td>Dave </td><td>  NA</td><td>14</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="full-join">
<h2>13 满联结 <code class="docutils literal notranslate"><span class="pre">full_join()</span></code><a class="headerlink" href="#full-join" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>有时候，我们不想丢失项，可以使用<code class="docutils literal notranslate"><span class="pre">full_join()</span></code>，该函数确保条目是完整的，信息缺失的地方为<code class="docutils literal notranslate"><span class="pre">NA</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">full_join</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th><th scope=col>age</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td><td>12</td></tr>
	<tr><td>Bob  </td><td>78.0</td><td>13</td></tr>
	<tr><td>Carol</td><td>90.5</td><td>NA</td></tr>
	<tr><td>Dave </td><td>  NA</td><td>14</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="inner-join">
<h2>14 内联结<code class="docutils literal notranslate"><span class="pre">inner_join()</span></code><a class="headerlink" href="#inner-join" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>只保留<code class="docutils literal notranslate"><span class="pre">name</span></code>条目相同地记录</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">inner_join</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;name&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th><th scope=col>age</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td><td>12</td></tr>
	<tr><td>Bob  </td><td>78.0</td><td>13</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="semi-join-x-y-anti-join-x-y">
<h2>15 筛选联结 <code class="docutils literal notranslate"><span class="pre">semi_join(x,y)</span></code> <code class="docutils literal notranslate"><span class="pre">anti_join(x,y)</span></code><a class="headerlink" href="#semi-join-x-y-anti-join-x-y" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>筛选联结，有两个<code class="docutils literal notranslate"><span class="pre">semi_join(x,</span> <span class="pre">y)</span></code>和<code class="docutils literal notranslate"><span class="pre">anti_join(x,</span> <span class="pre">y)</span></code>，</p></li>
<li><p>函数不改变数据框<code class="docutils literal notranslate"><span class="pre">x</span></code>的变量的数量，主要影响的是<code class="docutils literal notranslate"><span class="pre">x</span></code>的观测，也就说会剔除一些行，其功能类似<code class="docutils literal notranslate"><span class="pre">filter()</span></code></p></li>
<li><p><strong>半联结</strong><code class="docutils literal notranslate"><span class="pre">semi_join(x,</span> <span class="pre">y)</span></code>，保留<code class="docutils literal notranslate"><span class="pre">name</span></code>与<code class="docutils literal notranslate"><span class="pre">y</span></code>的<code class="docutils literal notranslate"><span class="pre">name</span></code>相一致的所有行，可以看作对<code class="docutils literal notranslate"><span class="pre">x</span></code>的筛选</p></li>
<li><p><strong>反联结</strong><code class="docutils literal notranslate"><span class="pre">anti_join(x,</span> <span class="pre">y)</span></code>，丢弃<code class="docutils literal notranslate"><span class="pre">name</span></code>与<code class="docutils literal notranslate"><span class="pre">y</span></code>的<code class="docutils literal notranslate"><span class="pre">name</span></code>相一致的所有行</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">semi_join</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">)</span>
<span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span>
<span class="w">  </span><span class="n">name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">df2</span><span class="o">$</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td></tr>
	<tr><td>Bob  </td><td>78.0</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>73.5</td></tr>
	<tr><td>Bob  </td><td>78.0</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">anti_join</span><span class="p">(</span><span class="n">df2</span><span class="p">,</span><span class="w"> </span><span class="n">by</span><span class="o">=</span><span class="s">&quot;name&quot;</span><span class="p">)</span>
<span class="n">df1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span>
<span class="w">  </span><span class="o">!</span><span class="w"> </span><span class="n">name</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="n">df2</span><span class="o">$</span><span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Carol</td><td>90.5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Carol</td><td>90.5</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span><span class="n">mean_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>

<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">name</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">mean_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>70.0</td></tr>
	<tr><td>Bob  </td><td>69.5</td></tr>
	<tr><td>Carol</td><td>85.0</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>mean_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>70.0</td></tr>
	<tr><td>Alice</td><td>math   </td><td>60</td><td>70.0</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>69.5</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>69.5</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>85.0</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>85.0</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="dplyr">
<h1><code class="docutils literal notranslate"><span class="pre">dplyr</span></code>进阶<a class="headerlink" href="#dplyr" title="Link to this heading">#</a></h1>
<section id="id6">
<h2>导入数据<a class="headerlink" href="#id6" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
<span class="nf">library</span><span class="p">(</span><span class="n">palmerpenguins</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">drop_na</span><span class="p">()</span><span class="w"> </span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">,</span><span class="w"> </span><span class="n">bill_depth_mm</span><span class="p">)</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&quot;bill_&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 2</caption>
<thead>
	<tr><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>39.1</td><td>18.7</td></tr>
	<tr><td>39.5</td><td>17.4</td></tr>
	<tr><td>40.3</td><td>18.0</td></tr>
	<tr><td>36.7</td><td>19.3</td></tr>
	<tr><td>39.3</td><td>20.6</td></tr>
	<tr><td>38.9</td><td>17.8</td></tr>
	<tr><td>39.2</td><td>19.6</td></tr>
	<tr><td>41.1</td><td>17.6</td></tr>
	<tr><td>38.6</td><td>21.2</td></tr>
	<tr><td>34.6</td><td>21.1</td></tr>
	<tr><td>36.6</td><td>17.8</td></tr>
	<tr><td>38.7</td><td>19.0</td></tr>
	<tr><td>42.5</td><td>20.7</td></tr>
	<tr><td>34.4</td><td>18.4</td></tr>
	<tr><td>46.0</td><td>21.5</td></tr>
	<tr><td>37.8</td><td>18.3</td></tr>
	<tr><td>37.7</td><td>18.7</td></tr>
	<tr><td>35.9</td><td>19.2</td></tr>
	<tr><td>38.2</td><td>18.1</td></tr>
	<tr><td>38.8</td><td>17.2</td></tr>
	<tr><td>35.3</td><td>18.9</td></tr>
	<tr><td>40.6</td><td>18.6</td></tr>
	<tr><td>40.5</td><td>17.9</td></tr>
	<tr><td>37.9</td><td>18.6</td></tr>
	<tr><td>40.5</td><td>18.9</td></tr>
	<tr><td>39.5</td><td>16.7</td></tr>
	<tr><td>37.2</td><td>18.1</td></tr>
	<tr><td>39.5</td><td>17.8</td></tr>
	<tr><td>40.9</td><td>18.9</td></tr>
	<tr><td>36.4</td><td>17.0</td></tr>
	<tr><td>⋮</td><td>⋮</td></tr>
	<tr><td>46.9</td><td>16.6</td></tr>
	<tr><td>53.5</td><td>19.9</td></tr>
	<tr><td>49.0</td><td>19.5</td></tr>
	<tr><td>46.2</td><td>17.5</td></tr>
	<tr><td>50.9</td><td>19.1</td></tr>
	<tr><td>45.5</td><td>17.0</td></tr>
	<tr><td>50.9</td><td>17.9</td></tr>
	<tr><td>50.8</td><td>18.5</td></tr>
	<tr><td>50.1</td><td>17.9</td></tr>
	<tr><td>49.0</td><td>19.6</td></tr>
	<tr><td>51.5</td><td>18.7</td></tr>
	<tr><td>49.8</td><td>17.3</td></tr>
	<tr><td>48.1</td><td>16.4</td></tr>
	<tr><td>51.4</td><td>19.0</td></tr>
	<tr><td>45.7</td><td>17.3</td></tr>
	<tr><td>50.7</td><td>19.7</td></tr>
	<tr><td>42.5</td><td>17.3</td></tr>
	<tr><td>52.2</td><td>18.8</td></tr>
	<tr><td>45.2</td><td>16.6</td></tr>
	<tr><td>49.3</td><td>19.9</td></tr>
	<tr><td>50.2</td><td>18.8</td></tr>
	<tr><td>45.6</td><td>19.4</td></tr>
	<tr><td>51.9</td><td>19.5</td></tr>
	<tr><td>46.8</td><td>16.5</td></tr>
	<tr><td>45.7</td><td>17.0</td></tr>
	<tr><td>55.8</td><td>19.8</td></tr>
	<tr><td>43.5</td><td>18.1</td></tr>
	<tr><td>49.6</td><td>18.2</td></tr>
	<tr><td>50.8</td><td>19.0</td></tr>
	<tr><td>50.2</td><td>18.7</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 2</caption>
<thead>
	<tr><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>39.1</td><td>18.7</td></tr>
	<tr><td>39.5</td><td>17.4</td></tr>
	<tr><td>40.3</td><td>18.0</td></tr>
	<tr><td>36.7</td><td>19.3</td></tr>
	<tr><td>39.3</td><td>20.6</td></tr>
	<tr><td>38.9</td><td>17.8</td></tr>
	<tr><td>39.2</td><td>19.6</td></tr>
	<tr><td>41.1</td><td>17.6</td></tr>
	<tr><td>38.6</td><td>21.2</td></tr>
	<tr><td>34.6</td><td>21.1</td></tr>
	<tr><td>36.6</td><td>17.8</td></tr>
	<tr><td>38.7</td><td>19.0</td></tr>
	<tr><td>42.5</td><td>20.7</td></tr>
	<tr><td>34.4</td><td>18.4</td></tr>
	<tr><td>46.0</td><td>21.5</td></tr>
	<tr><td>37.8</td><td>18.3</td></tr>
	<tr><td>37.7</td><td>18.7</td></tr>
	<tr><td>35.9</td><td>19.2</td></tr>
	<tr><td>38.2</td><td>18.1</td></tr>
	<tr><td>38.8</td><td>17.2</td></tr>
	<tr><td>35.3</td><td>18.9</td></tr>
	<tr><td>40.6</td><td>18.6</td></tr>
	<tr><td>40.5</td><td>17.9</td></tr>
	<tr><td>37.9</td><td>18.6</td></tr>
	<tr><td>40.5</td><td>18.9</td></tr>
	<tr><td>39.5</td><td>16.7</td></tr>
	<tr><td>37.2</td><td>18.1</td></tr>
	<tr><td>39.5</td><td>17.8</td></tr>
	<tr><td>40.9</td><td>18.9</td></tr>
	<tr><td>36.4</td><td>17.0</td></tr>
	<tr><td>⋮</td><td>⋮</td></tr>
	<tr><td>46.9</td><td>16.6</td></tr>
	<tr><td>53.5</td><td>19.9</td></tr>
	<tr><td>49.0</td><td>19.5</td></tr>
	<tr><td>46.2</td><td>17.5</td></tr>
	<tr><td>50.9</td><td>19.1</td></tr>
	<tr><td>45.5</td><td>17.0</td></tr>
	<tr><td>50.9</td><td>17.9</td></tr>
	<tr><td>50.8</td><td>18.5</td></tr>
	<tr><td>50.1</td><td>17.9</td></tr>
	<tr><td>49.0</td><td>19.6</td></tr>
	<tr><td>51.5</td><td>18.7</td></tr>
	<tr><td>49.8</td><td>17.3</td></tr>
	<tr><td>48.1</td><td>16.4</td></tr>
	<tr><td>51.4</td><td>19.0</td></tr>
	<tr><td>45.7</td><td>17.3</td></tr>
	<tr><td>50.7</td><td>19.7</td></tr>
	<tr><td>42.5</td><td>17.3</td></tr>
	<tr><td>52.2</td><td>18.8</td></tr>
	<tr><td>45.2</td><td>16.6</td></tr>
	<tr><td>49.3</td><td>19.9</td></tr>
	<tr><td>50.2</td><td>18.8</td></tr>
	<tr><td>45.6</td><td>19.4</td></tr>
	<tr><td>51.9</td><td>19.5</td></tr>
	<tr><td>46.8</td><td>16.5</td></tr>
	<tr><td>45.7</td><td>17.0</td></tr>
	<tr><td>55.8</td><td>19.8</td></tr>
	<tr><td>43.5</td><td>18.1</td></tr>
	<tr><td>49.6</td><td>18.2</td></tr>
	<tr><td>50.8</td><td>19.0</td></tr>
	<tr><td>50.2</td><td>18.7</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">is.numeric</span><span class="p">))</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="o">!</span><span class="nf">where</span><span class="p">(</span><span class="n">is.character</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 5</caption>
<thead>
	<tr><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>2007</td></tr>
	<tr><td>39.5</td><td>17.4</td><td>186</td><td>3800</td><td>2007</td></tr>
	<tr><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>2007</td></tr>
	<tr><td>36.7</td><td>19.3</td><td>193</td><td>3450</td><td>2007</td></tr>
	<tr><td>39.3</td><td>20.6</td><td>190</td><td>3650</td><td>2007</td></tr>
	<tr><td>38.9</td><td>17.8</td><td>181</td><td>3625</td><td>2007</td></tr>
	<tr><td>39.2</td><td>19.6</td><td>195</td><td>4675</td><td>2007</td></tr>
	<tr><td>41.1</td><td>17.6</td><td>182</td><td>3200</td><td>2007</td></tr>
	<tr><td>38.6</td><td>21.2</td><td>191</td><td>3800</td><td>2007</td></tr>
	<tr><td>34.6</td><td>21.1</td><td>198</td><td>4400</td><td>2007</td></tr>
	<tr><td>36.6</td><td>17.8</td><td>185</td><td>3700</td><td>2007</td></tr>
	<tr><td>38.7</td><td>19.0</td><td>195</td><td>3450</td><td>2007</td></tr>
	<tr><td>42.5</td><td>20.7</td><td>197</td><td>4500</td><td>2007</td></tr>
	<tr><td>34.4</td><td>18.4</td><td>184</td><td>3325</td><td>2007</td></tr>
	<tr><td>46.0</td><td>21.5</td><td>194</td><td>4200</td><td>2007</td></tr>
	<tr><td>37.8</td><td>18.3</td><td>174</td><td>3400</td><td>2007</td></tr>
	<tr><td>37.7</td><td>18.7</td><td>180</td><td>3600</td><td>2007</td></tr>
	<tr><td>35.9</td><td>19.2</td><td>189</td><td>3800</td><td>2007</td></tr>
	<tr><td>38.2</td><td>18.1</td><td>185</td><td>3950</td><td>2007</td></tr>
	<tr><td>38.8</td><td>17.2</td><td>180</td><td>3800</td><td>2007</td></tr>
	<tr><td>35.3</td><td>18.9</td><td>187</td><td>3800</td><td>2007</td></tr>
	<tr><td>40.6</td><td>18.6</td><td>183</td><td>3550</td><td>2007</td></tr>
	<tr><td>40.5</td><td>17.9</td><td>187</td><td>3200</td><td>2007</td></tr>
	<tr><td>37.9</td><td>18.6</td><td>172</td><td>3150</td><td>2007</td></tr>
	<tr><td>40.5</td><td>18.9</td><td>180</td><td>3950</td><td>2007</td></tr>
	<tr><td>39.5</td><td>16.7</td><td>178</td><td>3250</td><td>2007</td></tr>
	<tr><td>37.2</td><td>18.1</td><td>178</td><td>3900</td><td>2007</td></tr>
	<tr><td>39.5</td><td>17.8</td><td>188</td><td>3300</td><td>2007</td></tr>
	<tr><td>40.9</td><td>18.9</td><td>184</td><td>3900</td><td>2007</td></tr>
	<tr><td>36.4</td><td>17.0</td><td>195</td><td>3325</td><td>2007</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>46.9</td><td>16.6</td><td>192</td><td>2700</td><td>2008</td></tr>
	<tr><td>53.5</td><td>19.9</td><td>205</td><td>4500</td><td>2008</td></tr>
	<tr><td>49.0</td><td>19.5</td><td>210</td><td>3950</td><td>2008</td></tr>
	<tr><td>46.2</td><td>17.5</td><td>187</td><td>3650</td><td>2008</td></tr>
	<tr><td>50.9</td><td>19.1</td><td>196</td><td>3550</td><td>2008</td></tr>
	<tr><td>45.5</td><td>17.0</td><td>196</td><td>3500</td><td>2008</td></tr>
	<tr><td>50.9</td><td>17.9</td><td>196</td><td>3675</td><td>2009</td></tr>
	<tr><td>50.8</td><td>18.5</td><td>201</td><td>4450</td><td>2009</td></tr>
	<tr><td>50.1</td><td>17.9</td><td>190</td><td>3400</td><td>2009</td></tr>
	<tr><td>49.0</td><td>19.6</td><td>212</td><td>4300</td><td>2009</td></tr>
	<tr><td>51.5</td><td>18.7</td><td>187</td><td>3250</td><td>2009</td></tr>
	<tr><td>49.8</td><td>17.3</td><td>198</td><td>3675</td><td>2009</td></tr>
	<tr><td>48.1</td><td>16.4</td><td>199</td><td>3325</td><td>2009</td></tr>
	<tr><td>51.4</td><td>19.0</td><td>201</td><td>3950</td><td>2009</td></tr>
	<tr><td>45.7</td><td>17.3</td><td>193</td><td>3600</td><td>2009</td></tr>
	<tr><td>50.7</td><td>19.7</td><td>203</td><td>4050</td><td>2009</td></tr>
	<tr><td>42.5</td><td>17.3</td><td>187</td><td>3350</td><td>2009</td></tr>
	<tr><td>52.2</td><td>18.8</td><td>197</td><td>3450</td><td>2009</td></tr>
	<tr><td>45.2</td><td>16.6</td><td>191</td><td>3250</td><td>2009</td></tr>
	<tr><td>49.3</td><td>19.9</td><td>203</td><td>4050</td><td>2009</td></tr>
	<tr><td>50.2</td><td>18.8</td><td>202</td><td>3800</td><td>2009</td></tr>
	<tr><td>45.6</td><td>19.4</td><td>194</td><td>3525</td><td>2009</td></tr>
	<tr><td>51.9</td><td>19.5</td><td>206</td><td>3950</td><td>2009</td></tr>
	<tr><td>46.8</td><td>16.5</td><td>189</td><td>3650</td><td>2009</td></tr>
	<tr><td>45.7</td><td>17.0</td><td>195</td><td>3650</td><td>2009</td></tr>
	<tr><td>55.8</td><td>19.8</td><td>207</td><td>4000</td><td>2009</td></tr>
	<tr><td>43.5</td><td>18.1</td><td>202</td><td>3400</td><td>2009</td></tr>
	<tr><td>49.6</td><td>18.2</td><td>193</td><td>3775</td><td>2009</td></tr>
	<tr><td>50.8</td><td>19.0</td><td>210</td><td>4100</td><td>2009</td></tr>
	<tr><td>50.2</td><td>18.7</td><td>198</td><td>3775</td><td>2009</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.5</td><td>17.4</td><td>186</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.7</td><td>19.3</td><td>193</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.3</td><td>20.6</td><td>190</td><td>3650</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.9</td><td>17.8</td><td>181</td><td>3625</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.2</td><td>19.6</td><td>195</td><td>4675</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.1</td><td>17.6</td><td>182</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.6</td><td>21.2</td><td>191</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.6</td><td>21.1</td><td>198</td><td>4400</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.6</td><td>17.8</td><td>185</td><td>3700</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.7</td><td>19.0</td><td>195</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.5</td><td>20.7</td><td>197</td><td>4500</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.4</td><td>18.4</td><td>184</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>46.0</td><td>21.5</td><td>194</td><td>4200</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.8</td><td>18.3</td><td>174</td><td>3400</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.7</td><td>18.7</td><td>180</td><td>3600</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.9</td><td>19.2</td><td>189</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.2</td><td>18.1</td><td>185</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.8</td><td>17.2</td><td>180</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.3</td><td>18.9</td><td>187</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.6</td><td>18.6</td><td>183</td><td>3550</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>17.9</td><td>187</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.9</td><td>18.6</td><td>172</td><td>3150</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>18.9</td><td>180</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>16.7</td><td>178</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>37.2</td><td>18.1</td><td>178</td><td>3900</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>17.8</td><td>188</td><td>3300</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.9</td><td>18.9</td><td>184</td><td>3900</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>36.4</td><td>17.0</td><td>195</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.9</td><td>16.6</td><td>192</td><td>2700</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>53.5</td><td>19.9</td><td>205</td><td>4500</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.5</td><td>210</td><td>3950</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.2</td><td>17.5</td><td>187</td><td>3650</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>19.1</td><td>196</td><td>3550</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.5</td><td>17.0</td><td>196</td><td>3500</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>17.9</td><td>196</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>18.5</td><td>201</td><td>4450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.1</td><td>17.9</td><td>190</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.6</td><td>212</td><td>4300</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.5</td><td>18.7</td><td>187</td><td>3250</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.8</td><td>17.3</td><td>198</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>48.1</td><td>16.4</td><td>199</td><td>3325</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.4</td><td>19.0</td><td>201</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.3</td><td>193</td><td>3600</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.7</td><td>19.7</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>42.5</td><td>17.3</td><td>187</td><td>3350</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>52.2</td><td>18.8</td><td>197</td><td>3450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.2</td><td>16.6</td><td>191</td><td>3250</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.3</td><td>19.9</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.8</td><td>202</td><td>3800</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.6</td><td>19.4</td><td>194</td><td>3525</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.9</td><td>19.5</td><td>206</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.8</td><td>16.5</td><td>189</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.0</td><td>195</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>55.8</td><td>19.8</td><td>207</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>43.5</td><td>18.1</td><td>202</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.6</td><td>18.2</td><td>193</td><td>3775</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>19.0</td><td>210</td><td>4100</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.7</td><td>198</td><td>3775</td><td>female</td><td>2009</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 多种组合选择</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="n">species</span><span class="p">,</span><span class="w"> </span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&quot;bill_&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 3</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>39.1</td><td>18.7</td></tr>
	<tr><td>Adelie</td><td>39.5</td><td>17.4</td></tr>
	<tr><td>Adelie</td><td>40.3</td><td>18.0</td></tr>
	<tr><td>Adelie</td><td>36.7</td><td>19.3</td></tr>
	<tr><td>Adelie</td><td>39.3</td><td>20.6</td></tr>
	<tr><td>Adelie</td><td>38.9</td><td>17.8</td></tr>
	<tr><td>Adelie</td><td>39.2</td><td>19.6</td></tr>
	<tr><td>Adelie</td><td>41.1</td><td>17.6</td></tr>
	<tr><td>Adelie</td><td>38.6</td><td>21.2</td></tr>
	<tr><td>Adelie</td><td>34.6</td><td>21.1</td></tr>
	<tr><td>Adelie</td><td>36.6</td><td>17.8</td></tr>
	<tr><td>Adelie</td><td>38.7</td><td>19.0</td></tr>
	<tr><td>Adelie</td><td>42.5</td><td>20.7</td></tr>
	<tr><td>Adelie</td><td>34.4</td><td>18.4</td></tr>
	<tr><td>Adelie</td><td>46.0</td><td>21.5</td></tr>
	<tr><td>Adelie</td><td>37.8</td><td>18.3</td></tr>
	<tr><td>Adelie</td><td>37.7</td><td>18.7</td></tr>
	<tr><td>Adelie</td><td>35.9</td><td>19.2</td></tr>
	<tr><td>Adelie</td><td>38.2</td><td>18.1</td></tr>
	<tr><td>Adelie</td><td>38.8</td><td>17.2</td></tr>
	<tr><td>Adelie</td><td>35.3</td><td>18.9</td></tr>
	<tr><td>Adelie</td><td>40.6</td><td>18.6</td></tr>
	<tr><td>Adelie</td><td>40.5</td><td>17.9</td></tr>
	<tr><td>Adelie</td><td>37.9</td><td>18.6</td></tr>
	<tr><td>Adelie</td><td>40.5</td><td>18.9</td></tr>
	<tr><td>Adelie</td><td>39.5</td><td>16.7</td></tr>
	<tr><td>Adelie</td><td>37.2</td><td>18.1</td></tr>
	<tr><td>Adelie</td><td>39.5</td><td>17.8</td></tr>
	<tr><td>Adelie</td><td>40.9</td><td>18.9</td></tr>
	<tr><td>Adelie</td><td>36.4</td><td>17.0</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>46.9</td><td>16.6</td></tr>
	<tr><td>Chinstrap</td><td>53.5</td><td>19.9</td></tr>
	<tr><td>Chinstrap</td><td>49.0</td><td>19.5</td></tr>
	<tr><td>Chinstrap</td><td>46.2</td><td>17.5</td></tr>
	<tr><td>Chinstrap</td><td>50.9</td><td>19.1</td></tr>
	<tr><td>Chinstrap</td><td>45.5</td><td>17.0</td></tr>
	<tr><td>Chinstrap</td><td>50.9</td><td>17.9</td></tr>
	<tr><td>Chinstrap</td><td>50.8</td><td>18.5</td></tr>
	<tr><td>Chinstrap</td><td>50.1</td><td>17.9</td></tr>
	<tr><td>Chinstrap</td><td>49.0</td><td>19.6</td></tr>
	<tr><td>Chinstrap</td><td>51.5</td><td>18.7</td></tr>
	<tr><td>Chinstrap</td><td>49.8</td><td>17.3</td></tr>
	<tr><td>Chinstrap</td><td>48.1</td><td>16.4</td></tr>
	<tr><td>Chinstrap</td><td>51.4</td><td>19.0</td></tr>
	<tr><td>Chinstrap</td><td>45.7</td><td>17.3</td></tr>
	<tr><td>Chinstrap</td><td>50.7</td><td>19.7</td></tr>
	<tr><td>Chinstrap</td><td>42.5</td><td>17.3</td></tr>
	<tr><td>Chinstrap</td><td>52.2</td><td>18.8</td></tr>
	<tr><td>Chinstrap</td><td>45.2</td><td>16.6</td></tr>
	<tr><td>Chinstrap</td><td>49.3</td><td>19.9</td></tr>
	<tr><td>Chinstrap</td><td>50.2</td><td>18.8</td></tr>
	<tr><td>Chinstrap</td><td>45.6</td><td>19.4</td></tr>
	<tr><td>Chinstrap</td><td>51.9</td><td>19.5</td></tr>
	<tr><td>Chinstrap</td><td>46.8</td><td>16.5</td></tr>
	<tr><td>Chinstrap</td><td>45.7</td><td>17.0</td></tr>
	<tr><td>Chinstrap</td><td>55.8</td><td>19.8</td></tr>
	<tr><td>Chinstrap</td><td>43.5</td><td>18.1</td></tr>
	<tr><td>Chinstrap</td><td>49.6</td><td>18.2</td></tr>
	<tr><td>Chinstrap</td><td>50.8</td><td>19.0</td></tr>
	<tr><td>Chinstrap</td><td>50.2</td><td>18.7</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## 返回向量</span>
<span class="n">my_tibble</span><span class="p">[[</span><span class="s">&quot;x&quot;</span><span class="p">]]</span>
<span class="n">my_tibble</span><span class="o">$</span><span class="n">x</span>
<span class="n">my_tibble</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">pull</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 返回数据框</span>
<span class="n">my_tibble</span><span class="p">[</span><span class="s">&quot;x&quot;</span><span class="p">]</span>
<span class="n">my_tibble</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">tb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tibble</span><span class="p">(</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">,</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">5</span><span class="o">:</span><span class="m">1</span><span class="p">,</span>
<span class="w">  </span><span class="n">w</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span>
<span class="p">)</span>
<span class="n">tb</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 4</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th><th scope=col>w</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>0</td><td>5</td><td>0</td></tr>
	<tr><td>2</td><td>0</td><td>4</td><td>0</td></tr>
	<tr><td>3</td><td>0</td><td>3</td><td>0</td></tr>
	<tr><td>4</td><td>0</td><td>2</td><td>0</td></tr>
	<tr><td>5</td><td>0</td><td>1</td><td>0</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">myfun</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="nf">sum</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span>

<span class="n">tb</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="n">myfun</span><span class="p">))</span>

<span class="n">tb</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="o">~</span><span class="nf">sum</span><span class="p">(</span><span class="n">.x</span><span class="p">)</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 2</caption>
<thead>
	<tr><th scope=col>y</th><th scope=col>w</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 2</caption>
<thead>
	<tr><th scope=col>y</th><th scope=col>w</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
	<tr><td>0</td><td>0</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tibble</span><span class="p">(</span>
<span class="w">  </span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span>
<span class="w">  </span><span class="n">y</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">),</span>
<span class="w">  </span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">5</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">df</span>

<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">select</span><span class="p">(</span><span class="nf">where</span><span class="p">(</span><span class="o">~</span><span class="w"> </span><span class="o">!</span><span class="nf">all</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">.x</span><span class="p">))))</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="nf">if_any</span><span class="p">(</span><span class="nf">everything</span><span class="p">(),</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">.x</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;lgl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>NA</td><td> 2</td><td>NA</td></tr>
	<tr><td>NA</td><td> 3</td><td> 5</td></tr>
	<tr><td>NA</td><td>NA</td><td>NA</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td> 2</td><td>NA</td></tr>
	<tr><td> 3</td><td> 5</td></tr>
	<tr><td>NA</td><td>NA</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;lgl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>NA</td><td>2</td><td>NA</td></tr>
	<tr><td>NA</td><td>3</td><td> 5</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">species</span><span class="w"> </span><span class="o">%in%</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;Adelie&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;Gentoo&quot;</span><span class="p">))</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Adelie&quot;</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 265 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.5</td><td>17.4</td><td>186</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.7</td><td>19.3</td><td>193</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.3</td><td>20.6</td><td>190</td><td>3650</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.9</td><td>17.8</td><td>181</td><td>3625</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.2</td><td>19.6</td><td>195</td><td>4675</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.1</td><td>17.6</td><td>182</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.6</td><td>21.2</td><td>191</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.6</td><td>21.1</td><td>198</td><td>4400</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.6</td><td>17.8</td><td>185</td><td>3700</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.7</td><td>19.0</td><td>195</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.5</td><td>20.7</td><td>197</td><td>4500</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.4</td><td>18.4</td><td>184</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>46.0</td><td>21.5</td><td>194</td><td>4200</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.8</td><td>18.3</td><td>174</td><td>3400</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.7</td><td>18.7</td><td>180</td><td>3600</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.9</td><td>19.2</td><td>189</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.2</td><td>18.1</td><td>185</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.8</td><td>17.2</td><td>180</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.3</td><td>18.9</td><td>187</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.6</td><td>18.6</td><td>183</td><td>3550</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>17.9</td><td>187</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.9</td><td>18.6</td><td>172</td><td>3150</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>18.9</td><td>180</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>16.7</td><td>178</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>37.2</td><td>18.1</td><td>178</td><td>3900</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>17.8</td><td>188</td><td>3300</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.9</td><td>18.9</td><td>184</td><td>3900</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>36.4</td><td>17.0</td><td>195</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>52.2</td><td>17.1</td><td>228</td><td>5400</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>45.5</td><td>14.5</td><td>212</td><td>4750</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>49.5</td><td>16.1</td><td>224</td><td>5650</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>44.5</td><td>14.7</td><td>214</td><td>4850</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>50.8</td><td>15.7</td><td>226</td><td>5200</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>49.4</td><td>15.8</td><td>216</td><td>4925</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>46.9</td><td>14.6</td><td>222</td><td>4875</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>48.4</td><td>14.4</td><td>203</td><td>4625</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>51.1</td><td>16.5</td><td>225</td><td>5250</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>48.5</td><td>15.0</td><td>219</td><td>4850</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>55.9</td><td>17.0</td><td>228</td><td>5600</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>47.2</td><td>15.5</td><td>215</td><td>4975</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>49.1</td><td>15.0</td><td>228</td><td>5500</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>46.8</td><td>16.1</td><td>215</td><td>5500</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>41.7</td><td>14.7</td><td>210</td><td>4700</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>53.4</td><td>15.8</td><td>219</td><td>5500</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>43.3</td><td>14.0</td><td>208</td><td>4575</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>48.1</td><td>15.1</td><td>209</td><td>5500</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>50.5</td><td>15.2</td><td>216</td><td>5000</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>49.8</td><td>15.9</td><td>229</td><td>5950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>43.5</td><td>15.2</td><td>213</td><td>4650</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>51.5</td><td>16.3</td><td>230</td><td>5500</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>46.2</td><td>14.1</td><td>217</td><td>4375</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>55.1</td><td>16.0</td><td>230</td><td>5850</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>48.8</td><td>16.2</td><td>222</td><td>6000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>47.2</td><td>13.7</td><td>214</td><td>4925</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>46.8</td><td>14.3</td><td>215</td><td>4850</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>50.4</td><td>15.7</td><td>222</td><td>5750</td><td>male  </td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>45.2</td><td>14.8</td><td>212</td><td>5200</td><td>female</td><td>2009</td></tr>
	<tr><td>Gentoo</td><td>Biscoe</td><td>49.9</td><td>16.1</td><td>213</td><td>5400</td><td>male  </td><td>2009</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 50 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.1</td><td>17.6</td><td>182</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.5</td><td>20.7</td><td>197</td><td>4500</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>46.0</td><td>21.5</td><td>194</td><td>4200</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.6</td><td>18.6</td><td>183</td><td>3550</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>17.9</td><td>187</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>18.9</td><td>180</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.9</td><td>18.9</td><td>184</td><td>3900</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>42.2</td><td>18.5</td><td>180</td><td>3550</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.8</td><td>18.4</td><td>195</td><td>3900</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>44.1</td><td>19.7</td><td>196</td><td>4400</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>41.1</td><td>19.0</td><td>182</td><td>3425</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>42.3</td><td>21.2</td><td>191</td><td>4150</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.1</td><td>18.9</td><td>188</td><td>4300</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>42.0</td><td>19.5</td><td>200</td><td>4050</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>41.4</td><td>18.6</td><td>191</td><td>3700</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.6</td><td>18.8</td><td>193</td><td>3800</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>41.3</td><td>21.1</td><td>195</td><td>4400</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>41.1</td><td>18.2</td><td>192</td><td>4050</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>41.6</td><td>18.0</td><td>192</td><td>3950</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>41.1</td><td>19.1</td><td>188</td><td>4100</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.8</td><td>19.4</td><td>198</td><td>4450</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>45.8</td><td>18.9</td><td>197</td><td>4150</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.8</td><td>18.5</td><td>195</td><td>4250</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.9</td><td>16.8</td><td>191</td><td>3700</td><td>female</td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.1</td><td>19.1</td><td>195</td><td>4000</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.9</td><td>17.6</td><td>196</td><td>4700</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>41.3</td><td>20.3</td><td>194</td><td>3550</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>41.1</td><td>18.1</td><td>205</td><td>4300</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.8</td><td>18.9</td><td>208</td><td>4300</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.3</td><td>18.5</td><td>196</td><td>4350</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>43.2</td><td>18.5</td><td>192</td><td>4100</td><td>male  </td><td>2008</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>41.0</td><td>20.0</td><td>203</td><td>4725</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>43.2</td><td>19.0</td><td>197</td><td>4775</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>45.6</td><td>20.3</td><td>191</td><td>4600</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>42.2</td><td>19.5</td><td>197</td><td>4275</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>42.7</td><td>18.3</td><td>196</td><td>4075</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.1</td><td>18.6</td><td>189</td><td>3325</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.2</td><td>17.0</td><td>176</td><td>3450</td><td>female</td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.4</td><td>18.5</td><td>202</td><td>3875</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.6</td><td>19.0</td><td>199</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.5</td><td>18.3</td><td>195</td><td>4300</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>44.1</td><td>18.0</td><td>210</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>43.1</td><td>19.2</td><td>197</td><td>3500</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>41.1</td><td>17.5</td><td>190</td><td>3900</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.2</td><td>20.1</td><td>200</td><td>3975</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.2</td><td>17.1</td><td>193</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.6</td><td>17.2</td><td>187</td><td>3475</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.7</td><td>17.0</td><td>190</td><td>3725</td><td>male  </td><td>2009</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>41.5</td><td>18.5</td><td>201</td><td>4000</td><td>male  </td><td>2009</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="nf">filter</span><span class="p">(</span><span class="n">species</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;Adelie&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 0 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id7">
<h2>更多应用<a class="headerlink" href="#id7" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">head()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">tail()</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">slice()</span></code> 取表格前几行，可与<code class="docutils literal notranslate"><span class="pre">group_by()</span></code>等其他函数连用</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">head</span><span class="p">()</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">tail</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.5</td><td>17.4</td><td>186</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.7</td><td>19.3</td><td>193</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.3</td><td>20.6</td><td>190</td><td>3650</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.9</td><td>17.8</td><td>181</td><td>3625</td><td>female</td><td>2007</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.0</td><td>195</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>55.8</td><td>19.8</td><td>207</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>43.5</td><td>18.1</td><td>202</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.6</td><td>18.2</td><td>193</td><td>3775</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>19.0</td><td>210</td><td>4100</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.7</td><td>198</td><td>3775</td><td>female</td><td>2009</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">slice</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male</td><td>2007</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">species</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">slice</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 3 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie   </td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Chinstrap</td><td>Dream    </td><td>46.5</td><td>17.9</td><td>192</td><td>3500</td><td>female</td><td>2007</td></tr>
	<tr><td>Gentoo   </td><td>Biscoe   </td><td>46.1</td><td>13.2</td><td>211</td><td>4500</td><td>female</td><td>2007</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="nf">max</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">))</span>

<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">arrange</span><span class="p">(</span><span class="nf">desc</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">slice</span><span class="p">(</span><span class="m">1</span><span class="p">)</span>

<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">slice_max</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Gentoo</td><td>Biscoe</td><td>59.6</td><td>17</td><td>230</td><td>6050</td><td>male</td><td>2007</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Gentoo</td><td>Biscoe</td><td>59.6</td><td>17</td><td>230</td><td>6050</td><td>male</td><td>2007</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Gentoo</td><td>Biscoe</td><td>59.6</td><td>17</td><td>230</td><td>6050</td><td>male</td><td>2007</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="separate">
<h2>separate<a class="headerlink" href="#separate" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>按照某个分隔符分开某一列</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">tb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
<span class="w">  </span><span class="o">~</span><span class="n">day</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">price</span><span class="p">,</span>
<span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;30-45&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">2</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;40-95&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">3</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;89-65&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">4</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;45-63&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">5</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;52-42&quot;</span>
<span class="p">)</span>
<span class="n">tb</span>
<span class="n">tb1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tb</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">separate</span><span class="p">(</span><span class="n">price</span><span class="p">,</span><span class="w"> </span><span class="n">into</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;low&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;high&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;-&quot;</span><span class="p">)</span>
<span class="n">tb1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 2</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>price</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>30-45</td></tr>
	<tr><td>2</td><td>40-95</td></tr>
	<tr><td>3</td><td>89-65</td></tr>
	<tr><td>4</td><td>45-63</td></tr>
	<tr><td>5</td><td>52-42</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 3</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>low</th><th scope=col>high</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>30</td><td>45</td></tr>
	<tr><td>2</td><td>40</td><td>95</td></tr>
	<tr><td>3</td><td>89</td><td>65</td></tr>
	<tr><td>4</td><td>45</td><td>63</td></tr>
	<tr><td>5</td><td>52</td><td>42</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="unite">
<h2>unite<a class="headerlink" href="#unite" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>将指定的列按照指定的连接符连接组成新的列</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">remove=FALSE</span></code>，不移除被连接的都列</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">tb1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">unite</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s">&quot;prics&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">low</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;:&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">remove</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
<span class="n">tb1</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">unite</span><span class="p">(</span><span class="s">&quot;prics&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">low</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;:&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 4</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>prics</th><th scope=col>low</th><th scope=col>high</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>30:45</td><td>30</td><td>45</td></tr>
	<tr><td>2</td><td>40:95</td><td>40</td><td>95</td></tr>
	<tr><td>3</td><td>89:65</td><td>89</td><td>65</td></tr>
	<tr><td>4</td><td>45:63</td><td>45</td><td>63</td></tr>
	<tr><td>5</td><td>52:42</td><td>52</td><td>42</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 2</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>prics</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>30:45</td></tr>
	<tr><td>2</td><td>40:95</td></tr>
	<tr><td>3</td><td>89:65</td></tr>
	<tr><td>4</td><td>45:63</td></tr>
	<tr><td>5</td><td>52:42</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="distinct">
<h2>distinct<a class="headerlink" href="#distinct" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">distinct()</span></code>处理的对象是<code class="docutils literal notranslate"><span class="pre">data.frame</span></code>；</p></li>
<li><p>功能是筛选不重复的<code class="docutils literal notranslate"><span class="pre">row</span></code>；返回<code class="docutils literal notranslate"><span class="pre">data.frame</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">n_distinct()</span></code>处理的对象是<code class="docutils literal notranslate"><span class="pre">vector</span></code>；功能是统计不同的元素有多少个；返回一个数值</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
<span class="w">  </span><span class="o">~</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">z</span><span class="p">,</span>
<span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
<span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span>
<span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span>
<span class="w">  </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span>
<span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span>
<span class="w">  </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">3</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td>1</td></tr>
	<tr><td>1</td><td>1</td><td>2</td></tr>
	<tr><td>1</td><td>1</td><td>1</td></tr>
	<tr><td>2</td><td>1</td><td>2</td></tr>
	<tr><td>1</td><td>1</td><td>3</td></tr>
	<tr><td>3</td><td>3</td><td>1</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">distinct</span><span class="p">()</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">distinct</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">distinct</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">distinct</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">.keep_all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1"># 只保留最先出现的row</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td>1</td></tr>
	<tr><td>1</td><td>1</td><td>2</td></tr>
	<tr><td>2</td><td>1</td><td>2</td></tr>
	<tr><td>1</td><td>1</td><td>3</td></tr>
	<tr><td>3</td><td>3</td><td>1</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 1</caption>
<thead>
	<tr><th scope=col>x</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td></tr>
	<tr><td>2</td></tr>
	<tr><td>3</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>2</td><td>1</td></tr>
	<tr><td>3</td><td>3</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td>1</td></tr>
	<tr><td>2</td><td>1</td><td>2</td></tr>
	<tr><td>3</td><td>3</td><td>1</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">distinct</span><span class="p">(</span>
<span class="w">  </span><span class="nf">across</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)),</span>
<span class="w">  </span><span class="n">.keep_all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span>

<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">  </span><span class="nf">distinct</span><span class="p">(</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">.keep_all</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td>1</td></tr>
	<tr><td>2</td><td>1</td><td>2</td></tr>
	<tr><td>3</td><td>3</td><td>1</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 3 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td>1</td></tr>
	<tr><td>2</td><td>1</td><td>2</td></tr>
	<tr><td>3</td><td>3</td><td>1</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">group_by</span><span class="p">(</span><span class="n">x</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">summarise</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">n_distinct</span><span class="p">(</span><span class="n">z</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>3</td></tr>
	<tr><td>2</td><td>1</td></tr>
	<tr><td>3</td><td>1</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="na">
<h2>有关NA的计算<a class="headerlink" href="#na" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">NA</span></code>很讨厌，凡是它参与的四则运算，结果都是<code class="docutils literal notranslate"><span class="pre">NA</span></code>，</p></li>
<li><p>所以需要事先把它删除，增加参数说明 <code class="docutils literal notranslate"><span class="pre">na.rm</span> <span class="pre">=</span> <span class="pre">TRUE</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">sum</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">))</span>
<span class="nf">sum</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="m">2</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span><span class="w"> </span><span class="m">4</span><span class="p">),</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html">&lt;NA&gt;</div><div class="output text_html">7</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="n">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">if_else</span><span class="p">(</span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">4200</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;you are fat&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;you are fine&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 9</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th><th scope=col>body</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.5</td><td>17.4</td><td>186</td><td>3800</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.7</td><td>19.3</td><td>193</td><td>3450</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.3</td><td>20.6</td><td>190</td><td>3650</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.9</td><td>17.8</td><td>181</td><td>3625</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.2</td><td>19.6</td><td>195</td><td>4675</td><td>male  </td><td>2007</td><td>you are fat </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.1</td><td>17.6</td><td>182</td><td>3200</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.6</td><td>21.2</td><td>191</td><td>3800</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.6</td><td>21.1</td><td>198</td><td>4400</td><td>male  </td><td>2007</td><td>you are fat </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.6</td><td>17.8</td><td>185</td><td>3700</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.7</td><td>19.0</td><td>195</td><td>3450</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.5</td><td>20.7</td><td>197</td><td>4500</td><td>male  </td><td>2007</td><td>you are fat </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.4</td><td>18.4</td><td>184</td><td>3325</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>46.0</td><td>21.5</td><td>194</td><td>4200</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.8</td><td>18.3</td><td>174</td><td>3400</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.7</td><td>18.7</td><td>180</td><td>3600</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.9</td><td>19.2</td><td>189</td><td>3800</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.2</td><td>18.1</td><td>185</td><td>3950</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.8</td><td>17.2</td><td>180</td><td>3800</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.3</td><td>18.9</td><td>187</td><td>3800</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.6</td><td>18.6</td><td>183</td><td>3550</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>17.9</td><td>187</td><td>3200</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.9</td><td>18.6</td><td>172</td><td>3150</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>18.9</td><td>180</td><td>3950</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>16.7</td><td>178</td><td>3250</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>37.2</td><td>18.1</td><td>178</td><td>3900</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>17.8</td><td>188</td><td>3300</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.9</td><td>18.9</td><td>184</td><td>3900</td><td>male  </td><td>2007</td><td>you are fine</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>36.4</td><td>17.0</td><td>195</td><td>3325</td><td>female</td><td>2007</td><td>you are fine</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.9</td><td>16.6</td><td>192</td><td>2700</td><td>female</td><td>2008</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>53.5</td><td>19.9</td><td>205</td><td>4500</td><td>male  </td><td>2008</td><td>you are fat </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.5</td><td>210</td><td>3950</td><td>male  </td><td>2008</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.2</td><td>17.5</td><td>187</td><td>3650</td><td>female</td><td>2008</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>19.1</td><td>196</td><td>3550</td><td>male  </td><td>2008</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.5</td><td>17.0</td><td>196</td><td>3500</td><td>female</td><td>2008</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>17.9</td><td>196</td><td>3675</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>18.5</td><td>201</td><td>4450</td><td>male  </td><td>2009</td><td>you are fat </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.1</td><td>17.9</td><td>190</td><td>3400</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.6</td><td>212</td><td>4300</td><td>male  </td><td>2009</td><td>you are fat </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.5</td><td>18.7</td><td>187</td><td>3250</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.8</td><td>17.3</td><td>198</td><td>3675</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>48.1</td><td>16.4</td><td>199</td><td>3325</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.4</td><td>19.0</td><td>201</td><td>3950</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.3</td><td>193</td><td>3600</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.7</td><td>19.7</td><td>203</td><td>4050</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>42.5</td><td>17.3</td><td>187</td><td>3350</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>52.2</td><td>18.8</td><td>197</td><td>3450</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.2</td><td>16.6</td><td>191</td><td>3250</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.3</td><td>19.9</td><td>203</td><td>4050</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.8</td><td>202</td><td>3800</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.6</td><td>19.4</td><td>194</td><td>3525</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.9</td><td>19.5</td><td>206</td><td>3950</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.8</td><td>16.5</td><td>189</td><td>3650</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.0</td><td>195</td><td>3650</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>55.8</td><td>19.8</td><td>207</td><td>4000</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>43.5</td><td>18.1</td><td>202</td><td>3400</td><td>female</td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.6</td><td>18.2</td><td>193</td><td>3775</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>19.0</td><td>210</td><td>4100</td><td>male  </td><td>2009</td><td>you are fine</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.7</td><td>198</td><td>3775</td><td>female</td><td>2009</td><td>you are fine</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
<span class="w">    </span><span class="o">~</span><span class="n">name</span><span class="p">,</span><span class="w">     </span><span class="o">~</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">score</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w">    </span><span class="m">80</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w">    </span><span class="m">70</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w">    </span><span class="m">69</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Carol&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Carol&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w">    </span><span class="m">90</span>
<span class="w">  </span><span class="p">)</span>
<span class="n">df</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td></tr>
	<tr><td>Alice</td><td>math   </td><td>NA</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td></tr>
	<tr><td>Carol</td><td>english</td><td>NA</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">type</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">mean_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">new_score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">if_else</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">score</span><span class="p">),</span><span class="w"> </span><span class="n">mean_score</span><span class="p">,</span><span class="w"> </span><span class="n">score</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A grouped_df: 6 × 5</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>mean_score</th><th scope=col>new_score</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>75.0</td><td>80.0</td></tr>
	<tr><td>Alice</td><td>math   </td><td>NA</td><td>79.5</td><td>79.5</td></tr>
	<tr><td>Bob  </td><td>english</td><td>70</td><td>75.0</td><td>70.0</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>79.5</td><td>69.0</td></tr>
	<tr><td>Carol</td><td>english</td><td>NA</td><td>75.0</td><td>75.0</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td>79.5</td><td>90.0</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="n">body</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">case_when</span><span class="p">(</span>
<span class="w">      </span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">3500</span><span class="w">   </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;best&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">3500</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">4500</span><span class="w">  </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;good&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">4500</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">body_mass_g</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">5500</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;general&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="kc">TRUE</span><span class="w">                                     </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;other&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 9</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th><th scope=col>body</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.5</td><td>17.4</td><td>186</td><td>3800</td><td>female</td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.7</td><td>19.3</td><td>193</td><td>3450</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.3</td><td>20.6</td><td>190</td><td>3650</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.9</td><td>17.8</td><td>181</td><td>3625</td><td>female</td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.2</td><td>19.6</td><td>195</td><td>4675</td><td>male  </td><td>2007</td><td>general</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.1</td><td>17.6</td><td>182</td><td>3200</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.6</td><td>21.2</td><td>191</td><td>3800</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.6</td><td>21.1</td><td>198</td><td>4400</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.6</td><td>17.8</td><td>185</td><td>3700</td><td>female</td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.7</td><td>19.0</td><td>195</td><td>3450</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.5</td><td>20.7</td><td>197</td><td>4500</td><td>male  </td><td>2007</td><td>general</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.4</td><td>18.4</td><td>184</td><td>3325</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>46.0</td><td>21.5</td><td>194</td><td>4200</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.8</td><td>18.3</td><td>174</td><td>3400</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.7</td><td>18.7</td><td>180</td><td>3600</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.9</td><td>19.2</td><td>189</td><td>3800</td><td>female</td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.2</td><td>18.1</td><td>185</td><td>3950</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.8</td><td>17.2</td><td>180</td><td>3800</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.3</td><td>18.9</td><td>187</td><td>3800</td><td>female</td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.6</td><td>18.6</td><td>183</td><td>3550</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>17.9</td><td>187</td><td>3200</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.9</td><td>18.6</td><td>172</td><td>3150</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>18.9</td><td>180</td><td>3950</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>16.7</td><td>178</td><td>3250</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>37.2</td><td>18.1</td><td>178</td><td>3900</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>17.8</td><td>188</td><td>3300</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.9</td><td>18.9</td><td>184</td><td>3900</td><td>male  </td><td>2007</td><td>good   </td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>36.4</td><td>17.0</td><td>195</td><td>3325</td><td>female</td><td>2007</td><td>best   </td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.9</td><td>16.6</td><td>192</td><td>2700</td><td>female</td><td>2008</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>53.5</td><td>19.9</td><td>205</td><td>4500</td><td>male  </td><td>2008</td><td>general</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.5</td><td>210</td><td>3950</td><td>male  </td><td>2008</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.2</td><td>17.5</td><td>187</td><td>3650</td><td>female</td><td>2008</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>19.1</td><td>196</td><td>3550</td><td>male  </td><td>2008</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.5</td><td>17.0</td><td>196</td><td>3500</td><td>female</td><td>2008</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>17.9</td><td>196</td><td>3675</td><td>female</td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>18.5</td><td>201</td><td>4450</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.1</td><td>17.9</td><td>190</td><td>3400</td><td>female</td><td>2009</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.6</td><td>212</td><td>4300</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.5</td><td>18.7</td><td>187</td><td>3250</td><td>male  </td><td>2009</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.8</td><td>17.3</td><td>198</td><td>3675</td><td>female</td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>48.1</td><td>16.4</td><td>199</td><td>3325</td><td>female</td><td>2009</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.4</td><td>19.0</td><td>201</td><td>3950</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.3</td><td>193</td><td>3600</td><td>female</td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.7</td><td>19.7</td><td>203</td><td>4050</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>42.5</td><td>17.3</td><td>187</td><td>3350</td><td>female</td><td>2009</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>52.2</td><td>18.8</td><td>197</td><td>3450</td><td>male  </td><td>2009</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.2</td><td>16.6</td><td>191</td><td>3250</td><td>female</td><td>2009</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.3</td><td>19.9</td><td>203</td><td>4050</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.8</td><td>202</td><td>3800</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.6</td><td>19.4</td><td>194</td><td>3525</td><td>female</td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.9</td><td>19.5</td><td>206</td><td>3950</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.8</td><td>16.5</td><td>189</td><td>3650</td><td>female</td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.0</td><td>195</td><td>3650</td><td>female</td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>55.8</td><td>19.8</td><td>207</td><td>4000</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>43.5</td><td>18.1</td><td>202</td><td>3400</td><td>female</td><td>2009</td><td>best   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.6</td><td>18.2</td><td>193</td><td>3775</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>19.0</td><td>210</td><td>4100</td><td>male  </td><td>2009</td><td>good   </td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.7</td><td>198</td><td>3775</td><td>female</td><td>2009</td><td>good   </td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">degree</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">case_when</span><span class="p">(</span>
<span class="w">                  </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">35</span><span class="w">                        </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;A&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">35</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;B&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&gt;=</span><span class="w"> </span><span class="m">45</span><span class="w"> </span><span class="o">&amp;</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&lt;</span><span class="w"> </span><span class="m">55</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="kc">TRUE</span><span class="w">                                       </span><span class="o">~</span><span class="w"> </span><span class="s">&quot;D&quot;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 333 × 9</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th><th scope=col>degree</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.1</td><td>18.7</td><td>181</td><td>3750</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.5</td><td>17.4</td><td>186</td><td>3800</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>40.3</td><td>18.0</td><td>195</td><td>3250</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.7</td><td>19.3</td><td>193</td><td>3450</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.3</td><td>20.6</td><td>190</td><td>3650</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.9</td><td>17.8</td><td>181</td><td>3625</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>39.2</td><td>19.6</td><td>195</td><td>4675</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>41.1</td><td>17.6</td><td>182</td><td>3200</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.6</td><td>21.2</td><td>191</td><td>3800</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.6</td><td>21.1</td><td>198</td><td>4400</td><td>male  </td><td>2007</td><td>A</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>36.6</td><td>17.8</td><td>185</td><td>3700</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>38.7</td><td>19.0</td><td>195</td><td>3450</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>42.5</td><td>20.7</td><td>197</td><td>4500</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>34.4</td><td>18.4</td><td>184</td><td>3325</td><td>female</td><td>2007</td><td>A</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>46.0</td><td>21.5</td><td>194</td><td>4200</td><td>male  </td><td>2007</td><td>C</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.8</td><td>18.3</td><td>174</td><td>3400</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.7</td><td>18.7</td><td>180</td><td>3600</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.9</td><td>19.2</td><td>189</td><td>3800</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.2</td><td>18.1</td><td>185</td><td>3950</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>38.8</td><td>17.2</td><td>180</td><td>3800</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>35.3</td><td>18.9</td><td>187</td><td>3800</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.6</td><td>18.6</td><td>183</td><td>3550</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>17.9</td><td>187</td><td>3200</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>37.9</td><td>18.6</td><td>172</td><td>3150</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>40.5</td><td>18.9</td><td>180</td><td>3950</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>16.7</td><td>178</td><td>3250</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>37.2</td><td>18.1</td><td>178</td><td>3900</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>39.5</td><td>17.8</td><td>188</td><td>3300</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>40.9</td><td>18.9</td><td>184</td><td>3900</td><td>male  </td><td>2007</td><td>B</td></tr>
	<tr><td>Adelie</td><td>Dream    </td><td>36.4</td><td>17.0</td><td>195</td><td>3325</td><td>female</td><td>2007</td><td>B</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.9</td><td>16.6</td><td>192</td><td>2700</td><td>female</td><td>2008</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>53.5</td><td>19.9</td><td>205</td><td>4500</td><td>male  </td><td>2008</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.5</td><td>210</td><td>3950</td><td>male  </td><td>2008</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.2</td><td>17.5</td><td>187</td><td>3650</td><td>female</td><td>2008</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>19.1</td><td>196</td><td>3550</td><td>male  </td><td>2008</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.5</td><td>17.0</td><td>196</td><td>3500</td><td>female</td><td>2008</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.9</td><td>17.9</td><td>196</td><td>3675</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>18.5</td><td>201</td><td>4450</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.1</td><td>17.9</td><td>190</td><td>3400</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.0</td><td>19.6</td><td>212</td><td>4300</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.5</td><td>18.7</td><td>187</td><td>3250</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.8</td><td>17.3</td><td>198</td><td>3675</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>48.1</td><td>16.4</td><td>199</td><td>3325</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.4</td><td>19.0</td><td>201</td><td>3950</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.3</td><td>193</td><td>3600</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.7</td><td>19.7</td><td>203</td><td>4050</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>42.5</td><td>17.3</td><td>187</td><td>3350</td><td>female</td><td>2009</td><td>B</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>52.2</td><td>18.8</td><td>197</td><td>3450</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.2</td><td>16.6</td><td>191</td><td>3250</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.3</td><td>19.9</td><td>203</td><td>4050</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.8</td><td>202</td><td>3800</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.6</td><td>19.4</td><td>194</td><td>3525</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>51.9</td><td>19.5</td><td>206</td><td>3950</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>46.8</td><td>16.5</td><td>189</td><td>3650</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>45.7</td><td>17.0</td><td>195</td><td>3650</td><td>female</td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>55.8</td><td>19.8</td><td>207</td><td>4000</td><td>male  </td><td>2009</td><td>D</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>43.5</td><td>18.1</td><td>202</td><td>3400</td><td>female</td><td>2009</td><td>B</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>49.6</td><td>18.2</td><td>193</td><td>3775</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.8</td><td>19.0</td><td>210</td><td>4100</td><td>male  </td><td>2009</td><td>C</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>50.2</td><td>18.7</td><td>198</td><td>3775</td><td>female</td><td>2009</td><td>C</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id8">
<h2>拓展函数<a class="headerlink" href="#id8" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">n()</span></code>函数，统计当前分组数据框的行数</p></li>
<li><p>统计某个变量中各组出现的次数，可以使用<code class="docutils literal notranslate"><span class="pre">count()</span></code>函数, 可以统计不同组合出现的次数</p></li>
<li><p>可以在<code class="docutils literal notranslate"><span class="pre">count()</span></code>里构建新变量，并利用这个新变量完成统计</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">summarise</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">n</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 1</caption>
<thead>
	<tr><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>333</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">group_by</span><span class="p">(</span><span class="n">species</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">summarise</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">n</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie   </td><td>146</td></tr>
	<tr><td>Chinstrap</td><td> 68</td></tr>
	<tr><td>Gentoo   </td><td>119</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">species</span><span class="p">)</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">sex</span><span class="p">,</span><span class="w"> </span><span class="n">sort</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">island</span><span class="p">,</span><span class="w"> </span><span class="n">species</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 2</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie   </td><td>146</td></tr>
	<tr><td>Chinstrap</td><td> 68</td></tr>
	<tr><td>Gentoo   </td><td>119</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>sex</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>male  </td><td>168</td></tr>
	<tr><td>female</td><td>165</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 3</caption>
<thead>
	<tr><th scope=col>island</th><th scope=col>species</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Biscoe   </td><td>Adelie   </td><td> 44</td></tr>
	<tr><td>Biscoe   </td><td>Gentoo   </td><td>119</td></tr>
	<tr><td>Dream    </td><td>Adelie   </td><td> 55</td></tr>
	<tr><td>Dream    </td><td>Chinstrap</td><td> 68</td></tr>
	<tr><td>Torgersen</td><td>Adelie   </td><td> 47</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">filter</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">40</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">summarise</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">n</span><span class="p">())</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">count</span><span class="p">(</span><span class="n">longer_bill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">40</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 1</caption>
<thead>
	<tr><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>237</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 2 × 2</caption>
<thead>
	<tr><th scope=col>longer_bill</th><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;lgl&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>FALSE</td><td> 96</td></tr>
	<tr><td> TRUE</td><td>237</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id9">
<h2>强制转换<a class="headerlink" href="#id9" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>矢量中的元素必须是相同的类型，但如果不一样呢，会发生什么？ 这个时候R会强制转换成相同的类型。这就涉及数据类型的转换层级</p>
<ul>
<li><p>character &gt; numeric &gt; logical</p></li>
<li><p>double &gt; integer</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span><span class="w"> </span><span class="m">1</span><span class="p">,</span><span class="w"> </span><span class="kc">TRUE</span><span class="p">)</span><span class="w"> </span><span class="c1"># 强制转换成了字符串类型</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><style>
.list-inline {list-style: none; margin:0; padding: 0}
.list-inline>li {display: inline-block}
.list-inline>li:not(:last-child)::after {content: "\00b7"; padding: 0 .5ex}
</style>
<ol class=list-inline><li>'foo'</li><li>'1'</li><li>'TRUE'</li></ol>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">is_bigger40</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">40</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">n</span><span class="p">())</span>

<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">filter</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">&gt;</span><span class="w"> </span><span class="m">40</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">n</span><span class="p">())</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 1</caption>
<thead>
	<tr><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>344</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 1</caption>
<thead>
	<tr><th scope=col>n</th></tr>
	<tr><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>242</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="across">
<h2><code class="docutils literal notranslate"><span class="pre">across()</span></code>函数<a class="headerlink" href="#across" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p>更安全、更简练的写法</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 1</caption>
<thead>
	<tr><th scope=col>length</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>43.92193</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="n">length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span>
<span class="w">    </span><span class="n">depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">bill_depth_mm</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 2</caption>
<thead>
	<tr><th scope=col>length</th><th scope=col>depth</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>43.92193</td><td>17.15117</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">bill_depth_mm</span><span class="p">,</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="p">),</span><span class="w"> </span><span class="n">mean</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 2</caption>
<thead>
	<tr><th scope=col>bill_depth_mm</th><th scope=col>bill_length_mm</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>17.15117</td><td>43.92193</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">ends_with</span><span class="p">(</span><span class="s">&quot;_mm&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">mean</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 1 × 3</caption>
<thead>
	<tr><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>43.92193</td><td>17.15117</td><td>200.9152</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id10">
<h2>数据中心化<a class="headerlink" href="#id10" title="Link to this heading">#</a></h2>
<p>看数据的离散</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bill_length_mm</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span>
<span class="w">    </span><span class="n">bill_depth_mm</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">bill_depth_mm</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">bill_depth_mm</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 344 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.82193</td><td> 1.54883041</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.42193</td><td> 0.24883041</td><td>186</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-3.62193</td><td> 0.84883041</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>      NA</td><td>         NA</td><td> NA</td><td>  NA</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-7.22193</td><td> 2.14883041</td><td>193</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.62193</td><td> 3.44883041</td><td>190</td><td>3650</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-5.02193</td><td> 0.64883041</td><td>181</td><td>3625</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.72193</td><td> 2.44883041</td><td>195</td><td>4675</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-9.82193</td><td> 0.94883041</td><td>193</td><td>3475</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.92193</td><td> 3.04883041</td><td>190</td><td>4250</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-6.12193</td><td>-0.05116959</td><td>186</td><td>3300</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-6.12193</td><td> 0.14883041</td><td>180</td><td>3700</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-2.82193</td><td> 0.44883041</td><td>182</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-5.32193</td><td> 4.04883041</td><td>191</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-9.32193</td><td> 3.94883041</td><td>198</td><td>4400</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-7.32193</td><td> 0.64883041</td><td>185</td><td>3700</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-5.22193</td><td> 1.84883041</td><td>195</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.42193</td><td> 3.54883041</td><td>197</td><td>4500</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-9.52193</td><td> 1.24883041</td><td>184</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td> 2.07807</td><td> 4.34883041</td><td>194</td><td>4200</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-6.12193</td><td> 1.14883041</td><td>174</td><td>3400</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-6.22193</td><td> 1.54883041</td><td>180</td><td>3600</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-8.02193</td><td> 2.04883041</td><td>189</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-5.72193</td><td> 0.94883041</td><td>185</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-5.12193</td><td> 0.04883041</td><td>180</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-8.62193</td><td> 1.74883041</td><td>187</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-3.32193</td><td> 1.44883041</td><td>183</td><td>3550</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-3.42193</td><td> 0.74883041</td><td>187</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-6.02193</td><td> 1.44883041</td><td>172</td><td>3150</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-3.42193</td><td> 1.74883041</td><td>180</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.9780702</td><td>-0.5511696</td><td>192</td><td>2700</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 9.5780702</td><td> 2.7488304</td><td>205</td><td>4500</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.0780702</td><td> 2.3488304</td><td>210</td><td>3950</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.2780702</td><td> 0.3488304</td><td>187</td><td>3650</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.9780702</td><td> 1.9488304</td><td>196</td><td>3550</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.5780702</td><td>-0.1511696</td><td>196</td><td>3500</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.9780702</td><td> 0.7488304</td><td>196</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.8780702</td><td> 1.3488304</td><td>201</td><td>4450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.1780702</td><td> 0.7488304</td><td>190</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.0780702</td><td> 2.4488304</td><td>212</td><td>4300</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 7.5780702</td><td> 1.5488304</td><td>187</td><td>3250</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.8780702</td><td> 0.1488304</td><td>198</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 4.1780702</td><td>-0.7511696</td><td>199</td><td>3325</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 7.4780702</td><td> 1.8488304</td><td>201</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.7780702</td><td> 0.1488304</td><td>193</td><td>3600</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.7780702</td><td> 2.5488304</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-1.4219298</td><td> 0.1488304</td><td>187</td><td>3350</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 8.2780702</td><td> 1.6488304</td><td>197</td><td>3450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.2780702</td><td>-0.5511696</td><td>191</td><td>3250</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.3780702</td><td> 2.7488304</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.2780702</td><td> 1.6488304</td><td>202</td><td>3800</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.6780702</td><td> 2.2488304</td><td>194</td><td>3525</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 7.9780702</td><td> 2.3488304</td><td>206</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.8780702</td><td>-0.6511696</td><td>189</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.7780702</td><td>-0.1511696</td><td>195</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>11.8780702</td><td> 2.6488304</td><td>207</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-0.4219298</td><td> 0.9488304</td><td>202</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.6780702</td><td> 1.0488304</td><td>193</td><td>3775</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.8780702</td><td> 1.8488304</td><td>210</td><td>4100</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.2780702</td><td> 1.5488304</td><td>198</td><td>3775</td><td>female</td><td>2009</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">centralized</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">){</span>
<span class="w">    </span><span class="n">x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">,</span><span class="w"> </span><span class="n">bill_depth_mm</span><span class="p">),</span><span class="w"> </span><span class="n">centralized</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 344 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.82193</td><td> 1.54883041</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.42193</td><td> 0.24883041</td><td>186</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-3.62193</td><td> 0.84883041</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>      NA</td><td>         NA</td><td> NA</td><td>  NA</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-7.22193</td><td> 2.14883041</td><td>193</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.62193</td><td> 3.44883041</td><td>190</td><td>3650</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-5.02193</td><td> 0.64883041</td><td>181</td><td>3625</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-4.72193</td><td> 2.44883041</td><td>195</td><td>4675</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-9.82193</td><td> 0.94883041</td><td>193</td><td>3475</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.92193</td><td> 3.04883041</td><td>190</td><td>4250</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-6.12193</td><td>-0.05116959</td><td>186</td><td>3300</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-6.12193</td><td> 0.14883041</td><td>180</td><td>3700</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-2.82193</td><td> 0.44883041</td><td>182</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-5.32193</td><td> 4.04883041</td><td>191</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-9.32193</td><td> 3.94883041</td><td>198</td><td>4400</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-7.32193</td><td> 0.64883041</td><td>185</td><td>3700</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-5.22193</td><td> 1.84883041</td><td>195</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.42193</td><td> 3.54883041</td><td>197</td><td>4500</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-9.52193</td><td> 1.24883041</td><td>184</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td> 2.07807</td><td> 4.34883041</td><td>194</td><td>4200</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-6.12193</td><td> 1.14883041</td><td>174</td><td>3400</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-6.22193</td><td> 1.54883041</td><td>180</td><td>3600</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-8.02193</td><td> 2.04883041</td><td>189</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-5.72193</td><td> 0.94883041</td><td>185</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-5.12193</td><td> 0.04883041</td><td>180</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-8.62193</td><td> 1.74883041</td><td>187</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-3.32193</td><td> 1.44883041</td><td>183</td><td>3550</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-3.42193</td><td> 0.74883041</td><td>187</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-6.02193</td><td> 1.44883041</td><td>172</td><td>3150</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-3.42193</td><td> 1.74883041</td><td>180</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.9780702</td><td>-0.5511696</td><td>192</td><td>2700</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 9.5780702</td><td> 2.7488304</td><td>205</td><td>4500</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.0780702</td><td> 2.3488304</td><td>210</td><td>3950</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.2780702</td><td> 0.3488304</td><td>187</td><td>3650</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.9780702</td><td> 1.9488304</td><td>196</td><td>3550</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.5780702</td><td>-0.1511696</td><td>196</td><td>3500</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.9780702</td><td> 0.7488304</td><td>196</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.8780702</td><td> 1.3488304</td><td>201</td><td>4450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.1780702</td><td> 0.7488304</td><td>190</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.0780702</td><td> 2.4488304</td><td>212</td><td>4300</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 7.5780702</td><td> 1.5488304</td><td>187</td><td>3250</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.8780702</td><td> 0.1488304</td><td>198</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 4.1780702</td><td>-0.7511696</td><td>199</td><td>3325</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 7.4780702</td><td> 1.8488304</td><td>201</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.7780702</td><td> 0.1488304</td><td>193</td><td>3600</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.7780702</td><td> 2.5488304</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-1.4219298</td><td> 0.1488304</td><td>187</td><td>3350</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 8.2780702</td><td> 1.6488304</td><td>197</td><td>3450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.2780702</td><td>-0.5511696</td><td>191</td><td>3250</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.3780702</td><td> 2.7488304</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.2780702</td><td> 1.6488304</td><td>202</td><td>3800</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.6780702</td><td> 2.2488304</td><td>194</td><td>3525</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 7.9780702</td><td> 2.3488304</td><td>206</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.8780702</td><td>-0.6511696</td><td>189</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.7780702</td><td>-0.1511696</td><td>195</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>11.8780702</td><td> 2.6488304</td><td>207</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-0.4219298</td><td> 0.9488304</td><td>202</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 5.6780702</td><td> 1.0488304</td><td>193</td><td>3775</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.8780702</td><td> 1.8488304</td><td>210</td><td>4100</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 6.2780702</td><td> 1.5488304</td><td>198</td><td>3775</td><td>female</td><td>2009</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id11">
<h2>数据标准化<a class="headerlink" href="#id11" title="Link to this heading">#</a></h2>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">(x</span> <span class="pre">-</span> <span class="pre">mean(x))/sd(x)</span></code></p></li>
<li><p>那一列数据的每个值都减去平均值再除以标准差</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">std</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">function</span><span class="p">(</span><span class="n">x</span><span class="p">){</span>
<span class="w">    </span><span class="p">(</span><span class="n">x</span><span class="o">-</span><span class="nf">mean</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nf">sd</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">)</span>
<span class="p">}</span>
<span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">,</span><span class="w"> </span><span class="n">bill_depth_mm</span><span class="p">),</span><span class="w"> </span><span class="n">std</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 344 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8832047</td><td> 0.78430007</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8099390</td><td> 0.12600328</td><td>186</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.6634077</td><td> 0.42983257</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>        NA</td><td>         NA</td><td> NA</td><td>  NA</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.3227986</td><td> 1.08812936</td><td>193</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8465718</td><td> 1.74642615</td><td>190</td><td>3650</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.9198375</td><td> 0.32855614</td><td>181</td><td>3625</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8648883</td><td> 1.24004400</td><td>195</td><td>4675</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.7990254</td><td> 0.48047078</td><td>193</td><td>3475</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.3520286</td><td> 1.54387329</td><td>190</td><td>4250</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.1213181</td><td>-0.02591137</td><td>186</td><td>3300</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.1213181</td><td> 0.07536506</td><td>180</td><td>3700</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.5168764</td><td> 0.22727971</td><td>182</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.9747867</td><td> 2.05025544</td><td>191</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.7074433</td><td> 1.99961722</td><td>198</td><td>4400</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.3411150</td><td> 0.32855614</td><td>185</td><td>3700</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.9564703</td><td> 0.93621471</td><td>195</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.2604466</td><td> 1.79706436</td><td>197</td><td>4500</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.7440762</td><td> 0.63238542</td><td>184</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td> 0.3806280</td><td> 2.20217008</td><td>194</td><td>4200</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.1213181</td><td> 0.58174721</td><td>174</td><td>3400</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.1396345</td><td> 0.78430007</td><td>180</td><td>3600</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.4693299</td><td> 1.03749114</td><td>189</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.0480524</td><td> 0.48047078</td><td>185</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.9381539</td><td> 0.02472685</td><td>180</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.5792284</td><td> 0.88557650</td><td>187</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.6084584</td><td> 0.73366185</td><td>183</td><td>3550</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.6267749</td><td> 0.37919435</td><td>187</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.1030016</td><td> 0.73366185</td><td>172</td><td>3150</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.6267749</td><td> 0.88557650</td><td>180</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.54547569</td><td>-0.27910244</td><td>192</td><td>2700</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.75435906</td><td> 1.39195865</td><td>205</td><td>4500</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.93012040</td><td> 1.18940579</td><td>210</td><td>3950</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.41726078</td><td> 0.17664149</td><td>187</td><td>3650</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.27813228</td><td> 0.98685293</td><td>196</td><td>3550</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.28904588</td><td>-0.07654958</td><td>196</td><td>3500</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.27813228</td><td> 0.37919435</td><td>196</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.25981586</td><td> 0.68302364</td><td>201</td><td>4450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.13160096</td><td> 0.37919435</td><td>190</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.93012040</td><td> 1.24004400</td><td>212</td><td>4300</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.38803077</td><td> 0.78430007</td><td>187</td><td>3250</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.07665172</td><td> 0.07536506</td><td>198</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.76527266</td><td>-0.38037887</td><td>199</td><td>3325</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.36971435</td><td> 0.93621471</td><td>201</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.32567871</td><td> 0.07536506</td><td>193</td><td>3600</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.24149945</td><td> 1.29068222</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-0.26044656</td><td> 0.07536506</td><td>187</td><td>3350</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.51624567</td><td> 0.83493828</td><td>197</td><td>3450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.23409663</td><td>-0.27910244</td><td>191</td><td>3250</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.98506964</td><td> 1.39195865</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.14991738</td><td> 0.83493828</td><td>202</td><td>3800</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.30736229</td><td> 1.13876757</td><td>194</td><td>3525</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.46129643</td><td> 1.18940579</td><td>206</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.52715927</td><td>-0.32974066</td><td>189</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.32567871</td><td>-0.07654958</td><td>195</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.17563660</td><td> 1.34132043</td><td>207</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-0.07728242</td><td> 0.48047078</td><td>202</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.04001889</td><td> 0.53110900</td><td>193</td><td>3775</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.25981586</td><td> 0.93621471</td><td>210</td><td>4100</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.14991738</td><td> 0.78430007</td><td>198</td><td>3775</td><td>female</td><td>2009</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">bill_length_mm</span><span class="p">,</span><span class="w"> </span><span class="n">bill_depth_mm</span><span class="p">),</span><span class="w"> </span>
<span class="w">           </span><span class="o">~</span><span class="p">(</span><span class="n">.x</span><span class="w"> </span><span class="o">-</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">.x</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span><span class="w"> </span><span class="o">/</span><span class="w"> </span><span class="nf">sd</span><span class="p">(</span><span class="n">.x</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 344 × 8</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>island</th><th scope=col>bill_length_mm</th><th scope=col>bill_depth_mm</th><th scope=col>flipper_length_mm</th><th scope=col>body_mass_g</th><th scope=col>sex</th><th scope=col>year</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8832047</td><td> 0.78430007</td><td>181</td><td>3750</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8099390</td><td> 0.12600328</td><td>186</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.6634077</td><td> 0.42983257</td><td>195</td><td>3250</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>        NA</td><td>         NA</td><td> NA</td><td>  NA</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.3227986</td><td> 1.08812936</td><td>193</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8465718</td><td> 1.74642615</td><td>190</td><td>3650</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.9198375</td><td> 0.32855614</td><td>181</td><td>3625</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.8648883</td><td> 1.24004400</td><td>195</td><td>4675</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.7990254</td><td> 0.48047078</td><td>193</td><td>3475</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.3520286</td><td> 1.54387329</td><td>190</td><td>4250</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.1213181</td><td>-0.02591137</td><td>186</td><td>3300</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.1213181</td><td> 0.07536506</td><td>180</td><td>3700</td><td>NA    </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.5168764</td><td> 0.22727971</td><td>182</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.9747867</td><td> 2.05025544</td><td>191</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.7074433</td><td> 1.99961722</td><td>198</td><td>4400</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.3411150</td><td> 0.32855614</td><td>185</td><td>3700</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.9564703</td><td> 0.93621471</td><td>195</td><td>3450</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-0.2604466</td><td> 1.79706436</td><td>197</td><td>4500</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td>-1.7440762</td><td> 0.63238542</td><td>184</td><td>3325</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Torgersen</td><td> 0.3806280</td><td> 2.20217008</td><td>194</td><td>4200</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.1213181</td><td> 0.58174721</td><td>174</td><td>3400</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.1396345</td><td> 0.78430007</td><td>180</td><td>3600</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.4693299</td><td> 1.03749114</td><td>189</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.0480524</td><td> 0.48047078</td><td>185</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.9381539</td><td> 0.02472685</td><td>180</td><td>3800</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.5792284</td><td> 0.88557650</td><td>187</td><td>3800</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.6084584</td><td> 0.73366185</td><td>183</td><td>3550</td><td>male  </td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.6267749</td><td> 0.37919435</td><td>187</td><td>3200</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-1.1030016</td><td> 0.73366185</td><td>172</td><td>3150</td><td>female</td><td>2007</td></tr>
	<tr><td>Adelie</td><td>Biscoe   </td><td>-0.6267749</td><td> 0.88557650</td><td>180</td><td>3950</td><td>male  </td><td>2007</td></tr>
	<tr><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td><td>⋮</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.54547569</td><td>-0.27910244</td><td>192</td><td>2700</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.75435906</td><td> 1.39195865</td><td>205</td><td>4500</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.93012040</td><td> 1.18940579</td><td>210</td><td>3950</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.41726078</td><td> 0.17664149</td><td>187</td><td>3650</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.27813228</td><td> 0.98685293</td><td>196</td><td>3550</td><td>male  </td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.28904588</td><td>-0.07654958</td><td>196</td><td>3500</td><td>female</td><td>2008</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.27813228</td><td> 0.37919435</td><td>196</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.25981586</td><td> 0.68302364</td><td>201</td><td>4450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.13160096</td><td> 0.37919435</td><td>190</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.93012040</td><td> 1.24004400</td><td>212</td><td>4300</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.38803077</td><td> 0.78430007</td><td>187</td><td>3250</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.07665172</td><td> 0.07536506</td><td>198</td><td>3675</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.76527266</td><td>-0.38037887</td><td>199</td><td>3325</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.36971435</td><td> 0.93621471</td><td>201</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.32567871</td><td> 0.07536506</td><td>193</td><td>3600</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.24149945</td><td> 1.29068222</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-0.26044656</td><td> 0.07536506</td><td>187</td><td>3350</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.51624567</td><td> 0.83493828</td><td>197</td><td>3450</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.23409663</td><td>-0.27910244</td><td>191</td><td>3250</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.98506964</td><td> 1.39195865</td><td>203</td><td>4050</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.14991738</td><td> 0.83493828</td><td>202</td><td>3800</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.30736229</td><td> 1.13876757</td><td>194</td><td>3525</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.46129643</td><td> 1.18940579</td><td>206</td><td>3950</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.52715927</td><td>-0.32974066</td><td>189</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 0.32567871</td><td>-0.07654958</td><td>195</td><td>3650</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 2.17563660</td><td> 1.34132043</td><td>207</td><td>4000</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td>-0.07728242</td><td> 0.48047078</td><td>202</td><td>3400</td><td>female</td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.04001889</td><td> 0.53110900</td><td>193</td><td>3775</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.25981586</td><td> 0.93621471</td><td>210</td><td>4100</td><td>male  </td><td>2009</td></tr>
	<tr><td>Chinstrap</td><td>Dream</td><td> 1.14991738</td><td> 0.78430007</td><td>198</td><td>3775</td><td>female</td><td>2009</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="id12">
<h2>多列多个统计函数<a class="headerlink" href="#id12" title="Link to this heading">#</a></h2>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">species</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">ends_with</span><span class="p">(</span><span class="s">&quot;_mm&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">mean</span><span class="p">,</span><span class="w"> </span><span class="n">sd</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">sd</span><span class="p">),</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 7</caption>
<thead>
	<tr><th scope=col>species</th><th scope=col>bill_length_mm_mean</th><th scope=col>bill_length_mm_sd</th><th scope=col>bill_depth_mm_mean</th><th scope=col>bill_depth_mm_sd</th><th scope=col>flipper_length_mm_mean</th><th scope=col>flipper_length_mm_sd</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Adelie   </td><td>38.79139</td><td>2.663405</td><td>18.34636</td><td>1.2166498</td><td>189.9536</td><td>6.539457</td></tr>
	<tr><td>Chinstrap</td><td>48.83382</td><td>3.339256</td><td>18.42059</td><td>1.1353951</td><td>195.8235</td><td>7.131894</td></tr>
	<tr><td>Gentoo   </td><td>47.50488</td><td>3.081857</td><td>14.98211</td><td>0.9812198</td><td>217.1870</td><td>6.484976</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">penguins</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">group_by</span><span class="p">(</span><span class="n">sex</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">summarise</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">starts_with</span><span class="p">(</span><span class="s">&quot;bill_&quot;</span><span class="p">),</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">max</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">max</span><span class="p">,</span><span class="w"> </span><span class="n">min</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">min</span><span class="p">),</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 5</caption>
<thead>
	<tr><th scope=col>sex</th><th scope=col>bill_length_mm_max</th><th scope=col>bill_length_mm_min</th><th scope=col>bill_depth_mm_max</th><th scope=col>bill_depth_mm_min</th></tr>
	<tr><th scope=col>&lt;fct&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>female</td><td>58.0</td><td>32.1</td><td>20.7</td><td>13.1</td></tr>
	<tr><td>male  </td><td>59.6</td><td>34.6</td><td>21.5</td><td>14.1</td></tr>
	<tr><td>NA    </td><td>47.3</td><td>34.1</td><td>20.2</td><td>13.8</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
</section>
<section id="id13">
<h1>数据规整<a class="headerlink" href="#id13" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>1 宽表格变长表格<code class="docutils literal notranslate"><span class="pre">gather()</span></code> <code class="docutils literal notranslate"><span class="pre">pivot_longer()</span></code>, 推荐<code class="docutils literal notranslate"><span class="pre">pivot_longer()</span></code></p>
<ul>
<li><p><img alt="image.png" src="../_images/tidyr-fig.png" /></p></li>
<li><p>参数<code class="docutils literal notranslate"><span class="pre">cols</span></code>，表示哪些列需要转换.</p></li>
<li><p>参数<code class="docutils literal notranslate"><span class="pre">names_to</span></code>，表示<code class="docutils literal notranslate"><span class="pre">cols</span></code>选取的这些列的名字，构成了新的一列，这里需要取一个名字.</p></li>
<li><p>参数<code class="docutils literal notranslate"><span class="pre">values_to</span></code>， 表示<code class="docutils literal notranslate"><span class="pre">cols</span></code>选取的这些列的值，构成了新的一列，这里也需要取一个名字.</p></li>
<li><p>数据框总的信息量不会丢失</p></li>
</ul>
</li>
<li><p>2 长表格变宽表格<code class="docutils literal notranslate"><span class="pre">spread()</span></code> <code class="docutils literal notranslate"><span class="pre">pivot_wider()</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">library</span><span class="p">(</span><span class="n">tidyverse</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">plant_height</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">data.frame</span><span class="p">(</span>
<span class="w">  </span><span class="n">Day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">5</span><span class="p">,</span>
<span class="w">  </span><span class="n">A</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0.7</span><span class="p">,</span><span class="w"> </span><span class="m">1.0</span><span class="p">,</span><span class="w"> </span><span class="m">1.5</span><span class="p">,</span><span class="w"> </span><span class="m">1.8</span><span class="p">,</span><span class="w"> </span><span class="m">2.2</span><span class="p">),</span>
<span class="w">  </span><span class="n">B</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0.5</span><span class="p">,</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w"> </span><span class="m">0.9</span><span class="p">,</span><span class="w"> </span><span class="m">1.3</span><span class="p">,</span><span class="w"> </span><span class="m">1.8</span><span class="p">),</span>
<span class="w">  </span><span class="n">C</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0.3</span><span class="p">,</span><span class="w"> </span><span class="m">0.6</span><span class="p">,</span><span class="w"> </span><span class="m">1.0</span><span class="p">,</span><span class="w"> </span><span class="m">1.2</span><span class="p">,</span><span class="w"> </span><span class="m">2.2</span><span class="p">),</span>
<span class="w">  </span><span class="n">D</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">0.4</span><span class="p">,</span><span class="w"> </span><span class="m">0.7</span><span class="p">,</span><span class="w"> </span><span class="m">1.2</span><span class="p">,</span><span class="w"> </span><span class="m">1.5</span><span class="p">,</span><span class="w"> </span><span class="m">3.2</span><span class="p">)</span>
<span class="p">)</span>


<span class="n">plant_height</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 5 × 5</caption>
<thead>
	<tr><th scope=col>Day</th><th scope=col>A</th><th scope=col>B</th><th scope=col>C</th><th scope=col>D</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>0.7</td><td>0.5</td><td>0.3</td><td>0.4</td></tr>
	<tr><td>2</td><td>1.0</td><td>0.7</td><td>0.6</td><td>0.7</td></tr>
	<tr><td>3</td><td>1.5</td><td>0.9</td><td>1.0</td><td>1.2</td></tr>
	<tr><td>4</td><td>1.8</td><td>1.3</td><td>1.2</td><td>1.5</td></tr>
	<tr><td>5</td><td>2.2</td><td>1.8</td><td>2.2</td><td>3.2</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">melted</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plant_height</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">pivot_longer</span><span class="p">(</span><span class="n">cols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">A</span><span class="o">:</span><span class="n">D</span><span class="p">,</span><span class="w">   </span><span class="c1"># -Day or c(A, B, C, D) or c(&quot;A&quot;, &quot;B&quot;, &quot;C&quot;, &quot;D&quot;)</span>
<span class="w">               </span><span class="n">names_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;plant&quot;</span><span class="p">,</span>
<span class="w">               </span><span class="n">values_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;height&quot;</span><span class="p">)</span>
<span class="n">melted</span>

<span class="n">melted1</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">gather</span><span class="p">(</span><span class="n">plant_height</span><span class="p">,</span><span class="w"> </span><span class="n">variable</span><span class="p">,</span><span class="w"> </span><span class="n">value</span><span class="p">,</span><span class="w"> </span><span class="n">A</span><span class="o">:</span><span class="n">D</span><span class="p">)</span>
<span class="n">melted1</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 20 × 3</caption>
<thead>
	<tr><th scope=col>Day</th><th scope=col>plant</th><th scope=col>height</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>A</td><td>0.7</td></tr>
	<tr><td>1</td><td>B</td><td>0.5</td></tr>
	<tr><td>1</td><td>C</td><td>0.3</td></tr>
	<tr><td>1</td><td>D</td><td>0.4</td></tr>
	<tr><td>2</td><td>A</td><td>1.0</td></tr>
	<tr><td>2</td><td>B</td><td>0.7</td></tr>
	<tr><td>2</td><td>C</td><td>0.6</td></tr>
	<tr><td>2</td><td>D</td><td>0.7</td></tr>
	<tr><td>3</td><td>A</td><td>1.5</td></tr>
	<tr><td>3</td><td>B</td><td>0.9</td></tr>
	<tr><td>3</td><td>C</td><td>1.0</td></tr>
	<tr><td>3</td><td>D</td><td>1.2</td></tr>
	<tr><td>4</td><td>A</td><td>1.8</td></tr>
	<tr><td>4</td><td>B</td><td>1.3</td></tr>
	<tr><td>4</td><td>C</td><td>1.2</td></tr>
	<tr><td>4</td><td>D</td><td>1.5</td></tr>
	<tr><td>5</td><td>A</td><td>2.2</td></tr>
	<tr><td>5</td><td>B</td><td>1.8</td></tr>
	<tr><td>5</td><td>C</td><td>2.2</td></tr>
	<tr><td>5</td><td>D</td><td>3.2</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A data.frame: 20 × 3</caption>
<thead>
	<tr><th scope=col>Day</th><th scope=col>variable</th><th scope=col>value</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>A</td><td>0.7</td></tr>
	<tr><td>2</td><td>A</td><td>1.0</td></tr>
	<tr><td>3</td><td>A</td><td>1.5</td></tr>
	<tr><td>4</td><td>A</td><td>1.8</td></tr>
	<tr><td>5</td><td>A</td><td>2.2</td></tr>
	<tr><td>1</td><td>B</td><td>0.5</td></tr>
	<tr><td>2</td><td>B</td><td>0.7</td></tr>
	<tr><td>3</td><td>B</td><td>0.9</td></tr>
	<tr><td>4</td><td>B</td><td>1.3</td></tr>
	<tr><td>5</td><td>B</td><td>1.8</td></tr>
	<tr><td>1</td><td>C</td><td>0.3</td></tr>
	<tr><td>2</td><td>C</td><td>0.6</td></tr>
	<tr><td>3</td><td>C</td><td>1.0</td></tr>
	<tr><td>4</td><td>C</td><td>1.2</td></tr>
	<tr><td>5</td><td>C</td><td>2.2</td></tr>
	<tr><td>1</td><td>D</td><td>0.4</td></tr>
	<tr><td>2</td><td>D</td><td>0.7</td></tr>
	<tr><td>3</td><td>D</td><td>1.2</td></tr>
	<tr><td>4</td><td>D</td><td>1.5</td></tr>
	<tr><td>5</td><td>D</td><td>3.2</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">melted</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">ggplot</span><span class="p">(</span><span class="nf">aes</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="n">Day</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">color</span><span class="o">=</span><span class="n">plant</span><span class="p">))</span><span class="o">+</span>
<span class="w">  </span><span class="nf">geom_line</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<img alt="../_images/59d1503de4e4e54b5f719310e6a0b37dc225d1eca65773cabb839ddbe4fb041c.png" src="../_images/59d1503de4e4e54b5f719310e6a0b37dc225d1eca65773cabb839ddbe4fb041c.png" />
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">wide</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">melted</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">pivot_wider</span><span class="p">(</span>
<span class="w">  </span><span class="n">names_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;plant&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="n">values_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;height&quot;</span>
<span class="p">)</span>
<span class="n">wide</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 5</caption>
<thead>
	<tr><th scope=col>Day</th><th scope=col>A</th><th scope=col>B</th><th scope=col>C</th><th scope=col>D</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>0.7</td><td>0.5</td><td>0.3</td><td>0.4</td></tr>
	<tr><td>2</td><td>1.0</td><td>0.7</td><td>0.6</td><td>0.7</td></tr>
	<tr><td>3</td><td>1.5</td><td>0.9</td><td>1.0</td><td>1.2</td></tr>
	<tr><td>4</td><td>1.8</td><td>1.3</td><td>1.2</td><td>1.5</td></tr>
	<tr><td>5</td><td>2.2</td><td>1.8</td><td>2.2</td><td>3.2</td></tr>
</tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li><p>列名转换成多个变量</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">pivot_longer()</span></code>中的<code class="docutils literal notranslate"><span class="pre">names_pattern</span> <span class="pre">=</span> </code>指定表头属性</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">pivot_wider()</span></code>中的<code class="docutils literal notranslate"><span class="pre">names_glue</span> <span class="pre">=</span> </code>指定转变后表头样式</p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">plant_record</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">data.frame</span><span class="p">(</span>
<span class="w">         </span><span class="n">day</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">3L</span><span class="p">,</span><span class="w"> </span><span class="m">4L</span><span class="p">,</span><span class="w"> </span><span class="m">5L</span><span class="p">),</span>
<span class="w">    </span><span class="n">A_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">1.1</span><span class="p">,</span><span class="w"> </span><span class="m">1.2</span><span class="p">,</span><span class="w"> </span><span class="m">1.3</span><span class="p">,</span><span class="w"> </span><span class="m">1.4</span><span class="p">,</span><span class="w"> </span><span class="m">1.5</span><span class="p">),</span>
<span class="w">     </span><span class="n">A_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">2.1</span><span class="p">,</span><span class="w"> </span><span class="m">2.2</span><span class="p">,</span><span class="w"> </span><span class="m">2.3</span><span class="p">,</span><span class="w"> </span><span class="m">2.4</span><span class="p">,</span><span class="w"> </span><span class="m">2.5</span><span class="p">),</span>
<span class="w">     </span><span class="n">A_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">3.1</span><span class="p">,</span><span class="w"> </span><span class="m">3.2</span><span class="p">,</span><span class="w"> </span><span class="m">3.3</span><span class="p">,</span><span class="w"> </span><span class="m">3.4</span><span class="p">,</span><span class="w"> </span><span class="m">3.5</span><span class="p">),</span>
<span class="w">    </span><span class="n">B_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">4.1</span><span class="p">,</span><span class="w"> </span><span class="m">4.2</span><span class="p">,</span><span class="w"> </span><span class="m">4.3</span><span class="p">,</span><span class="w"> </span><span class="m">4.4</span><span class="p">,</span><span class="w"> </span><span class="m">4.5</span><span class="p">),</span>
<span class="w">     </span><span class="n">B_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">5.1</span><span class="p">,</span><span class="w"> </span><span class="m">5.2</span><span class="p">,</span><span class="w"> </span><span class="m">5.3</span><span class="p">,</span><span class="w"> </span><span class="m">5.4</span><span class="p">,</span><span class="w"> </span><span class="m">5.5</span><span class="p">),</span>
<span class="w">     </span><span class="n">B_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">6.1</span><span class="p">,</span><span class="w"> </span><span class="m">6.2</span><span class="p">,</span><span class="w"> </span><span class="m">6.3</span><span class="p">,</span><span class="w"> </span><span class="m">6.4</span><span class="p">,</span><span class="w"> </span><span class="m">6.5</span><span class="p">),</span>
<span class="w">    </span><span class="n">C_height</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">7.1</span><span class="p">,</span><span class="w"> </span><span class="m">7.2</span><span class="p">,</span><span class="w"> </span><span class="m">7.3</span><span class="p">,</span><span class="w"> </span><span class="m">7.4</span><span class="p">,</span><span class="w"> </span><span class="m">7.5</span><span class="p">),</span>
<span class="w">     </span><span class="n">C_width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">8.1</span><span class="p">,</span><span class="w"> </span><span class="m">8.2</span><span class="p">,</span><span class="w"> </span><span class="m">8.3</span><span class="p">,</span><span class="w"> </span><span class="m">8.4</span><span class="p">,</span><span class="w"> </span><span class="m">8.5</span><span class="p">),</span>
<span class="w">     </span><span class="n">C_depth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="m">9.1</span><span class="p">,</span><span class="w"> </span><span class="m">9.2</span><span class="p">,</span><span class="w"> </span><span class="m">9.3</span><span class="p">,</span><span class="w"> </span><span class="m">9.4</span><span class="p">,</span><span class="w"> </span><span class="m">9.5</span><span class="p">)</span>
<span class="p">)</span>
<span class="n">plant_record</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A data.frame: 5 × 10</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>A_height</th><th scope=col>A_width</th><th scope=col>A_depth</th><th scope=col>B_height</th><th scope=col>B_width</th><th scope=col>B_depth</th><th scope=col>C_height</th><th scope=col>C_width</th><th scope=col>C_depth</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1.1</td><td>2.1</td><td>3.1</td><td>4.1</td><td>5.1</td><td>6.1</td><td>7.1</td><td>8.1</td><td>9.1</td></tr>
	<tr><td>2</td><td>1.2</td><td>2.2</td><td>3.2</td><td>4.2</td><td>5.2</td><td>6.2</td><td>7.2</td><td>8.2</td><td>9.2</td></tr>
	<tr><td>3</td><td>1.3</td><td>2.3</td><td>3.3</td><td>4.3</td><td>5.3</td><td>6.3</td><td>7.3</td><td>8.3</td><td>9.3</td></tr>
	<tr><td>4</td><td>1.4</td><td>2.4</td><td>3.4</td><td>4.4</td><td>5.4</td><td>6.4</td><td>7.4</td><td>8.4</td><td>9.4</td></tr>
	<tr><td>5</td><td>1.5</td><td>2.5</td><td>3.5</td><td>4.5</td><td>5.5</td><td>6.5</td><td>7.5</td><td>8.5</td><td>9.5</td></tr>
</tbody>
</table>
</div></div>
</div>
<p>我们想原始数据框的列名，转换成多个变量，比如A,B,C成为物种(species)变量，（height, width, depth）成为<code class="docutils literal notranslate"><span class="pre">parameter</span></code>变量<img alt="image.png" src="../_images/make_data_tidy1.png" /></p>
<p>我们希望原始数据框的列名中，一部分进入变量，一部分保持原来的列名，比如，<img alt="image-2.png" src="../_images/make_data_tidy2.jpg" /></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## pivot_longer()函数的实现列名转换成多个变量</span>
<span class="n">plant_record</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="n">tidyr</span><span class="o">::</span><span class="nf">pivot_longer</span><span class="p">(</span><span class="n">cols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">day</span><span class="p">,</span>
<span class="w">                      </span><span class="n">names_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;species&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;parameter&quot;</span><span class="p">),</span>
<span class="w">                      </span><span class="n">names_pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;(.*)_(.*)&quot;</span><span class="p">,</span>
<span class="w">                      </span><span class="n">values_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;value&quot;</span><span class="p">)</span>

<span class="c1">## pivot_longer()函数实现部分列名转变成变量，部分保持原来的列名</span>
<span class="n">plant_record_longer</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">plant_record</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="n">tidyr</span><span class="o">::</span><span class="nf">pivot_longer</span><span class="p">(</span><span class="n">cols</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="o">!</span><span class="n">day</span><span class="p">,</span>
<span class="w">                      </span><span class="n">names_to</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;species&quot;</span><span class="p">,</span><span class="s">&quot;.value&quot;</span><span class="p">),</span>
<span class="w">                      </span><span class="n">names_pattern</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;(.*)_(.*)&quot;</span><span class="p">)</span>
<span class="n">plant_record_longer</span>
<span class="c1"># 注意 .value 而不是value，说明这里不是单个列名，</span>
<span class="c1"># 而是匹配得到的多个值做列名</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 45 × 4</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>species</th><th scope=col>parameter</th><th scope=col>value</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>A</td><td>height</td><td>1.1</td></tr>
	<tr><td>1</td><td>A</td><td>width </td><td>2.1</td></tr>
	<tr><td>1</td><td>A</td><td>depth </td><td>3.1</td></tr>
	<tr><td>1</td><td>B</td><td>height</td><td>4.1</td></tr>
	<tr><td>1</td><td>B</td><td>width </td><td>5.1</td></tr>
	<tr><td>1</td><td>B</td><td>depth </td><td>6.1</td></tr>
	<tr><td>1</td><td>C</td><td>height</td><td>7.1</td></tr>
	<tr><td>1</td><td>C</td><td>width </td><td>8.1</td></tr>
	<tr><td>1</td><td>C</td><td>depth </td><td>9.1</td></tr>
	<tr><td>2</td><td>A</td><td>height</td><td>1.2</td></tr>
	<tr><td>2</td><td>A</td><td>width </td><td>2.2</td></tr>
	<tr><td>2</td><td>A</td><td>depth </td><td>3.2</td></tr>
	<tr><td>2</td><td>B</td><td>height</td><td>4.2</td></tr>
	<tr><td>2</td><td>B</td><td>width </td><td>5.2</td></tr>
	<tr><td>2</td><td>B</td><td>depth </td><td>6.2</td></tr>
	<tr><td>2</td><td>C</td><td>height</td><td>7.2</td></tr>
	<tr><td>2</td><td>C</td><td>width </td><td>8.2</td></tr>
	<tr><td>2</td><td>C</td><td>depth </td><td>9.2</td></tr>
	<tr><td>3</td><td>A</td><td>height</td><td>1.3</td></tr>
	<tr><td>3</td><td>A</td><td>width </td><td>2.3</td></tr>
	<tr><td>3</td><td>A</td><td>depth </td><td>3.3</td></tr>
	<tr><td>3</td><td>B</td><td>height</td><td>4.3</td></tr>
	<tr><td>3</td><td>B</td><td>width </td><td>5.3</td></tr>
	<tr><td>3</td><td>B</td><td>depth </td><td>6.3</td></tr>
	<tr><td>3</td><td>C</td><td>height</td><td>7.3</td></tr>
	<tr><td>3</td><td>C</td><td>width </td><td>8.3</td></tr>
	<tr><td>3</td><td>C</td><td>depth </td><td>9.3</td></tr>
	<tr><td>4</td><td>A</td><td>height</td><td>1.4</td></tr>
	<tr><td>4</td><td>A</td><td>width </td><td>2.4</td></tr>
	<tr><td>4</td><td>A</td><td>depth </td><td>3.4</td></tr>
	<tr><td>4</td><td>B</td><td>height</td><td>4.4</td></tr>
	<tr><td>4</td><td>B</td><td>width </td><td>5.4</td></tr>
	<tr><td>4</td><td>B</td><td>depth </td><td>6.4</td></tr>
	<tr><td>4</td><td>C</td><td>height</td><td>7.4</td></tr>
	<tr><td>4</td><td>C</td><td>width </td><td>8.4</td></tr>
	<tr><td>4</td><td>C</td><td>depth </td><td>9.4</td></tr>
	<tr><td>5</td><td>A</td><td>height</td><td>1.5</td></tr>
	<tr><td>5</td><td>A</td><td>width </td><td>2.5</td></tr>
	<tr><td>5</td><td>A</td><td>depth </td><td>3.5</td></tr>
	<tr><td>5</td><td>B</td><td>height</td><td>4.5</td></tr>
	<tr><td>5</td><td>B</td><td>width </td><td>5.5</td></tr>
	<tr><td>5</td><td>B</td><td>depth </td><td>6.5</td></tr>
	<tr><td>5</td><td>C</td><td>height</td><td>7.5</td></tr>
	<tr><td>5</td><td>C</td><td>width </td><td>8.5</td></tr>
	<tr><td>5</td><td>C</td><td>depth </td><td>9.5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 15 × 5</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>species</th><th scope=col>height</th><th scope=col>width</th><th scope=col>depth</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>A</td><td>1.1</td><td>2.1</td><td>3.1</td></tr>
	<tr><td>1</td><td>B</td><td>4.1</td><td>5.1</td><td>6.1</td></tr>
	<tr><td>1</td><td>C</td><td>7.1</td><td>8.1</td><td>9.1</td></tr>
	<tr><td>2</td><td>A</td><td>1.2</td><td>2.2</td><td>3.2</td></tr>
	<tr><td>2</td><td>B</td><td>4.2</td><td>5.2</td><td>6.2</td></tr>
	<tr><td>2</td><td>C</td><td>7.2</td><td>8.2</td><td>9.2</td></tr>
	<tr><td>3</td><td>A</td><td>1.3</td><td>2.3</td><td>3.3</td></tr>
	<tr><td>3</td><td>B</td><td>4.3</td><td>5.3</td><td>6.3</td></tr>
	<tr><td>3</td><td>C</td><td>7.3</td><td>8.3</td><td>9.3</td></tr>
	<tr><td>4</td><td>A</td><td>1.4</td><td>2.4</td><td>3.4</td></tr>
	<tr><td>4</td><td>B</td><td>4.4</td><td>5.4</td><td>6.4</td></tr>
	<tr><td>4</td><td>C</td><td>7.4</td><td>8.4</td><td>9.4</td></tr>
	<tr><td>5</td><td>A</td><td>1.5</td><td>2.5</td><td>3.5</td></tr>
	<tr><td>5</td><td>B</td><td>4.5</td><td>5.5</td><td>6.5</td></tr>
	<tr><td>5</td><td>C</td><td>7.5</td><td>8.5</td><td>9.5</td></tr>
</tbody>
</table>
</div></div>
</div>
<ul class="simple">
<li><p>变回去</p>
<ul>
<li><p><img alt="image.png" src="../_images/make_data_tidy3.jpg" /></p></li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">us_rent_income</span><span class="w"> </span><span class="o">%&gt;%</span>
<span class="w">    </span><span class="nf">pivot_wider</span><span class="p">(</span>
<span class="w">      </span><span class="n">names_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">variable</span><span class="p">,</span>
<span class="w">      </span><span class="n">names_glue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;{variable}_{.value}&quot;</span><span class="p">,</span>
<span class="w">      </span><span class="n">values_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">estimate</span><span class="p">,</span><span class="w"> </span><span class="n">moe</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<ul class="simple">
<li><p>注意 <code class="docutils literal notranslate"><span class="pre">.value</span></code> 而不是<code class="docutils literal notranslate"><span class="pre">value</span></code>，说明这里不是单个列名，而是匹配得到的多个值做列名</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">plant_record_longer</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">pivot_wider</span><span class="p">(</span><span class="n">names_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">species</span><span class="p">,</span>
<span class="w">              </span><span class="n">values_from</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">height</span><span class="p">,</span><span class="w"> </span><span class="n">width</span><span class="p">,</span><span class="w"> </span><span class="n">depth</span><span class="p">),</span>
<span class="w">              </span><span class="n">names_glue</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;{species}_{.value}&quot;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 10</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>A_height</th><th scope=col>B_height</th><th scope=col>C_height</th><th scope=col>A_width</th><th scope=col>B_width</th><th scope=col>C_width</th><th scope=col>A_depth</th><th scope=col>B_depth</th><th scope=col>C_depth</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1.1</td><td>4.1</td><td>7.1</td><td>2.1</td><td>5.1</td><td>8.1</td><td>3.1</td><td>6.1</td><td>9.1</td></tr>
	<tr><td>2</td><td>1.2</td><td>4.2</td><td>7.2</td><td>2.2</td><td>5.2</td><td>8.2</td><td>3.2</td><td>6.2</td><td>9.2</td></tr>
	<tr><td>3</td><td>1.3</td><td>4.3</td><td>7.3</td><td>2.3</td><td>5.3</td><td>8.3</td><td>3.3</td><td>6.3</td><td>9.3</td></tr>
	<tr><td>4</td><td>1.4</td><td>4.4</td><td>7.4</td><td>2.4</td><td>5.4</td><td>8.4</td><td>3.4</td><td>6.4</td><td>9.4</td></tr>
	<tr><td>5</td><td>1.5</td><td>4.5</td><td>7.5</td><td>2.5</td><td>5.5</td><td>8.5</td><td>3.5</td><td>6.5</td><td>9.5</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="tidy-data">
<h1><code class="docutils literal notranslate"><span class="pre">tidy</span> <span class="pre">data</span></code>原则<a class="headerlink" href="#tidy-data" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>Hadley Wickhamt提出了数据科学tidy原则<img alt="image.png" src="../_images/import_datatype01.png" /></p>
<ul>
<li><p>一切都是数据框，任何数据都可以规整</p></li>
<li><p>数据框的一列代表一个<strong>变量</strong>，数据框的一行代表一次<strong>观察</strong></p></li>
<li><p>函数处理数据时，数据框进数据框出（函数的第一个参数始终为<strong>数据框</strong>）</p></li>
</ul>
</li>
</ul>
<p>根据Hadley Wickham的思想，这里的宽表格(<code class="docutils literal notranslate"><span class="pre">plant_heigt</span></code>和 <code class="docutils literal notranslate"><span class="pre">wide</span></code>)不是<code class="docutils literal notranslate"><span class="pre">tidy</span></code>的，只有长表格(long)才是<code class="docutils literal notranslate"><span class="pre">tidy</span></code>的，</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">melted</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 20 × 3</caption>
<thead>
	<tr><th scope=col>Day</th><th scope=col>plant</th><th scope=col>height</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>A</td><td>0.7</td></tr>
	<tr><td>1</td><td>B</td><td>0.5</td></tr>
	<tr><td>1</td><td>C</td><td>0.3</td></tr>
	<tr><td>1</td><td>D</td><td>0.4</td></tr>
	<tr><td>2</td><td>A</td><td>1.0</td></tr>
	<tr><td>2</td><td>B</td><td>0.7</td></tr>
	<tr><td>2</td><td>C</td><td>0.6</td></tr>
	<tr><td>2</td><td>D</td><td>0.7</td></tr>
	<tr><td>3</td><td>A</td><td>1.5</td></tr>
	<tr><td>3</td><td>B</td><td>0.9</td></tr>
	<tr><td>3</td><td>C</td><td>1.0</td></tr>
	<tr><td>3</td><td>D</td><td>1.2</td></tr>
	<tr><td>4</td><td>A</td><td>1.8</td></tr>
	<tr><td>4</td><td>B</td><td>1.3</td></tr>
	<tr><td>4</td><td>C</td><td>1.2</td></tr>
	<tr><td>4</td><td>D</td><td>1.5</td></tr>
	<tr><td>5</td><td>A</td><td>2.2</td></tr>
	<tr><td>5</td><td>B</td><td>1.8</td></tr>
	<tr><td>5</td><td>C</td><td>2.2</td></tr>
	<tr><td>5</td><td>D</td><td>3.2</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="fill">
<h1><code class="docutils literal notranslate"><span class="pre">fill()</span></code>缺失值填充<a class="headerlink" href="#fill" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>根据最近进行补齐</p></li>
<li><p>可以控制填充的方向<code class="docutils literal notranslate"><span class="pre">.direction</span> <span class="pre">=</span> <span class="pre">&quot;up&quot;</span></code></p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sales</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
<span class="w">  </span><span class="o">~</span><span class="n">quarter</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">sales</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q1&quot;</span><span class="p">,</span><span class="w">  </span><span class="m">2000</span><span class="p">,</span><span class="w">  </span><span class="m">66013</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q2&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">69182</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q3&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">53175</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q4&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">21001</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q1&quot;</span><span class="p">,</span><span class="w">  </span><span class="m">2001</span><span class="p">,</span><span class="w">  </span><span class="m">46036</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q2&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">58842</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q3&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">44568</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q4&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">50197</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q1&quot;</span><span class="p">,</span><span class="w">  </span><span class="m">2002</span><span class="p">,</span><span class="w">  </span><span class="m">39113</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q2&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">41668</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q3&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">30144</span><span class="p">,</span>
<span class="w">      </span><span class="s">&quot;Q4&quot;</span><span class="p">,</span><span class="w">    </span><span class="kc">NA</span><span class="p">,</span><span class="w">  </span><span class="m">52897</span>
<span class="w">  </span><span class="p">)</span>
<span class="n">sales</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 12 × 3</caption>
<thead>
	<tr><th scope=col>quarter</th><th scope=col>year</th><th scope=col>sales</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Q1</td><td>2000</td><td>66013</td></tr>
	<tr><td>Q2</td><td>  NA</td><td>69182</td></tr>
	<tr><td>Q3</td><td>  NA</td><td>53175</td></tr>
	<tr><td>Q4</td><td>  NA</td><td>21001</td></tr>
	<tr><td>Q1</td><td>2001</td><td>46036</td></tr>
	<tr><td>Q2</td><td>  NA</td><td>58842</td></tr>
	<tr><td>Q3</td><td>  NA</td><td>44568</td></tr>
	<tr><td>Q4</td><td>  NA</td><td>50197</td></tr>
	<tr><td>Q1</td><td>2002</td><td>39113</td></tr>
	<tr><td>Q2</td><td>  NA</td><td>41668</td></tr>
	<tr><td>Q3</td><td>  NA</td><td>30144</td></tr>
	<tr><td>Q4</td><td>  NA</td><td>52897</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">sales</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">fill</span><span class="p">(</span><span class="n">year</span><span class="p">)</span>
<span class="n">sales</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">fill</span><span class="p">(</span><span class="n">year</span><span class="p">,</span><span class="w"> </span><span class="n">.direction</span><span class="o">=</span><span class="s">&quot;up&quot;</span><span class="p">)</span><span class="w"> </span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 12 × 3</caption>
<thead>
	<tr><th scope=col>quarter</th><th scope=col>year</th><th scope=col>sales</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Q1</td><td>2000</td><td>66013</td></tr>
	<tr><td>Q2</td><td>2000</td><td>69182</td></tr>
	<tr><td>Q3</td><td>2000</td><td>53175</td></tr>
	<tr><td>Q4</td><td>2000</td><td>21001</td></tr>
	<tr><td>Q1</td><td>2001</td><td>46036</td></tr>
	<tr><td>Q2</td><td>2001</td><td>58842</td></tr>
	<tr><td>Q3</td><td>2001</td><td>44568</td></tr>
	<tr><td>Q4</td><td>2001</td><td>50197</td></tr>
	<tr><td>Q1</td><td>2002</td><td>39113</td></tr>
	<tr><td>Q2</td><td>2002</td><td>41668</td></tr>
	<tr><td>Q3</td><td>2002</td><td>30144</td></tr>
	<tr><td>Q4</td><td>2002</td><td>52897</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 12 × 3</caption>
<thead>
	<tr><th scope=col>quarter</th><th scope=col>year</th><th scope=col>sales</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Q1</td><td>2000</td><td>66013</td></tr>
	<tr><td>Q2</td><td>2001</td><td>69182</td></tr>
	<tr><td>Q3</td><td>2001</td><td>53175</td></tr>
	<tr><td>Q4</td><td>2001</td><td>21001</td></tr>
	<tr><td>Q1</td><td>2001</td><td>46036</td></tr>
	<tr><td>Q2</td><td>2002</td><td>58842</td></tr>
	<tr><td>Q3</td><td>2002</td><td>44568</td></tr>
	<tr><td>Q4</td><td>2002</td><td>50197</td></tr>
	<tr><td>Q1</td><td>2002</td><td>39113</td></tr>
	<tr><td>Q2</td><td>  NA</td><td>41668</td></tr>
	<tr><td>Q3</td><td>  NA</td><td>30144</td></tr>
	<tr><td>Q4</td><td>  NA</td><td>52897</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="expand-complete">
<h1><code class="docutils literal notranslate"><span class="pre">expand()</span> </code>与 <code class="docutils literal notranslate"><span class="pre">complete()</span></code><a class="headerlink" href="#expand-complete" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expand()</span></code>指定数据框的若干列，根据其向量元素值，产生所有可能的交叉组合</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">nesting()</span></code>用于限定只产生数据框已出现的组合</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">complete()</span></code>补全，可以看作是<code class="docutils literal notranslate"><span class="pre">expand(nesting())</span> <span class="pre">+</span> <span class="pre">fill()</span></code></p>
<ul>
<li><p>数据在<code class="docutils literal notranslate"><span class="pre">complete</span></code>补全的时候，会面临有两种缺失值：</p>
<ul>
<li><p>1 补位的时候造成的空缺</p></li>
<li><p>2 数据原先就存在缺失值</p></li>
<li><p>3 补位的时候造成的空缺，可通过<code class="docutils literal notranslate"><span class="pre">fill</span> <span class="pre">=</span> <span class="pre">list(x</span> <span class="pre">=</span> <span class="pre">0)</span></code>控制填充</p></li>
<li><p>4 数据原先就存在缺失值，最好通过 <code class="docutils literal notranslate"><span class="pre">explicit</span> <span class="pre">=</span> <span class="pre">FALSE</span></code>显式地控制是否填充</p></li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
<span class="w">  </span><span class="o">~</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">z</span><span class="p">,</span>
<span class="w">  </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">4L</span><span class="p">,</span>
<span class="w">  </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">5L</span><span class="p">,</span>
<span class="w">  </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">1L</span><span class="p">,</span><span class="w"> </span><span class="kc">NA</span><span class="p">,</span>
<span class="w">  </span><span class="m">3L</span><span class="p">,</span><span class="w"> </span><span class="m">2L</span><span class="p">,</span><span class="w"> </span><span class="m">6L</span>
<span class="p">)</span>
<span class="n">df</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">expand</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">)</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">expand</span><span class="p">(</span><span class="nf">nesting</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">))</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">expand</span><span class="p">(</span><span class="nf">nesting</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">),</span><span class="w"> </span><span class="n">z</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td> 4</td></tr>
	<tr><td>1</td><td>2</td><td> 5</td></tr>
	<tr><td>2</td><td>1</td><td>NA</td></tr>
	<tr><td>3</td><td>2</td><td> 6</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>1</td><td>2</td></tr>
	<tr><td>2</td><td>1</td></tr>
	<tr><td>2</td><td>2</td></tr>
	<tr><td>3</td><td>1</td></tr>
	<tr><td>3</td><td>2</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>1</td><td>2</td></tr>
	<tr><td>2</td><td>1</td></tr>
	<tr><td>3</td><td>2</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 16 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td> 4</td></tr>
	<tr><td>1</td><td>1</td><td> 5</td></tr>
	<tr><td>1</td><td>1</td><td> 6</td></tr>
	<tr><td>1</td><td>1</td><td>NA</td></tr>
	<tr><td>1</td><td>2</td><td> 4</td></tr>
	<tr><td>1</td><td>2</td><td> 5</td></tr>
	<tr><td>1</td><td>2</td><td> 6</td></tr>
	<tr><td>1</td><td>2</td><td>NA</td></tr>
	<tr><td>2</td><td>1</td><td> 4</td></tr>
	<tr><td>2</td><td>1</td><td> 5</td></tr>
	<tr><td>2</td><td>1</td><td> 6</td></tr>
	<tr><td>2</td><td>1</td><td>NA</td></tr>
	<tr><td>3</td><td>2</td><td> 4</td></tr>
	<tr><td>3</td><td>2</td><td> 5</td></tr>
	<tr><td>3</td><td>2</td><td> 6</td></tr>
	<tr><td>3</td><td>2</td><td>NA</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">)</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="o">=</span><span class="nf">list</span><span class="p">(</span><span class="n">z</span><span class="o">=</span><span class="m">0</span><span class="p">))</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="nf">complete</span><span class="p">(</span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="p">,</span><span class="w"> </span><span class="n">fill</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">list</span><span class="p">(</span><span class="n">z</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0</span><span class="p">),</span><span class="w"> </span><span class="n">explicit</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td> 4</td></tr>
	<tr><td>1</td><td>2</td><td> 5</td></tr>
	<tr><td>2</td><td>1</td><td>NA</td></tr>
	<tr><td>2</td><td>2</td><td>NA</td></tr>
	<tr><td>3</td><td>1</td><td>NA</td></tr>
	<tr><td>3</td><td>2</td><td> 6</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td>4</td></tr>
	<tr><td>1</td><td>2</td><td>5</td></tr>
	<tr><td>2</td><td>1</td><td>0</td></tr>
	<tr><td>2</td><td>2</td><td>0</td></tr>
	<tr><td>3</td><td>1</td><td>0</td></tr>
	<tr><td>3</td><td>2</td><td>6</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 3</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th><th scope=col>z</th></tr>
	<tr><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td><td> 4</td></tr>
	<tr><td>1</td><td>2</td><td> 5</td></tr>
	<tr><td>2</td><td>1</td><td>NA</td></tr>
	<tr><td>2</td><td>2</td><td> 0</td></tr>
	<tr><td>3</td><td>1</td><td> 0</td></tr>
	<tr><td>3</td><td>2</td><td> 6</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="expand-grid-crossing">
<h1><code class="docutils literal notranslate"><span class="pre">expand_grid()</span> </code>与<code class="docutils literal notranslate"> <span class="pre">crossing()</span></code><a class="headerlink" href="#expand-grid-crossing" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">expand_grid()</span></code>产生一个新的数据框，每行对应着向量元素的所有交叉组合</p></li>
<li><p>向量换成数据框也可以，其结果就是数据框行与元素的交叉组合</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">crossing()</span></code>可以看作是<code class="docutils literal notranslate"><span class="pre">expand_grid()</span> <span class="pre">+</span> <span class="pre">distinct()</span></code>， 即<code class="docutils literal notranslate"><span class="pre">crossing()</span></code>在完成交叉组合之后会自动去重</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="nf">expand_grid</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="w"> </span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">)</span>
<span class="nf">crossing</span><span class="p">(</span><span class="n">x</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="m">1</span><span class="p">,</span><span class="m">1</span><span class="p">,</span><span class="m">2</span><span class="p">),</span><span class="w"> </span><span class="n">y</span><span class="o">=</span><span class="m">1</span><span class="o">:</span><span class="m">2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>1</td><td>2</td></tr>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>1</td><td>2</td></tr>
	<tr><td>2</td><td>1</td></tr>
	<tr><td>2</td><td>2</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 2</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>y</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;int&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>1</td></tr>
	<tr><td>1</td><td>2</td></tr>
	<tr><td>2</td><td>1</td></tr>
	<tr><td>2</td><td>2</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="separate-unite">
<h1><code class="docutils literal notranslate"><span class="pre">separate()</span></code>与<code class="docutils literal notranslate"><span class="pre">unite()</span></code><a class="headerlink" href="#separate-unite" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p>以提供的分隔符分隔或合并某些列</p></li>
<li><p>有时候分隔符搞不定的，可以用正则表达式，将捕获的每组弄成一列</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">tb</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
<span class="w">  </span><span class="o">~</span><span class="n">day</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">price</span><span class="p">,</span>
<span class="w">  </span><span class="m">1</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;30-45&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">2</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;40-95&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">3</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;89-65&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">4</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;45-63&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="m">5</span><span class="p">,</span><span class="w">   </span><span class="s">&quot;52-42&quot;</span>
<span class="p">)</span>
<span class="n">tb</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">separate</span><span class="p">(</span><span class="n">price</span><span class="p">,</span><span class="w"> </span><span class="n">into</span><span class="o">=</span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;low&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;high&quot;</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;-&quot;</span><span class="p">)</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">unite</span><span class="p">(</span><span class="n">col</span><span class="o">=</span><span class="s">&quot;price&quot;</span><span class="p">,</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="n">low</span><span class="p">,</span><span class="w"> </span><span class="n">high</span><span class="p">),</span><span class="w"> </span><span class="n">sep</span><span class="o">=</span><span class="s">&quot;:&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">remove</span><span class="o">=</span><span class="kc">FALSE</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 5 × 4</caption>
<thead>
	<tr><th scope=col>day</th><th scope=col>price</th><th scope=col>low</th><th scope=col>high</th></tr>
	<tr><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1</td><td>30:45</td><td>30</td><td>45</td></tr>
	<tr><td>2</td><td>40:95</td><td>40</td><td>95</td></tr>
	<tr><td>3</td><td>89:65</td><td>89</td><td>65</td></tr>
	<tr><td>4</td><td>45:63</td><td>45</td><td>63</td></tr>
	<tr><td>5</td><td>52:42</td><td>52</td><td>42</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1">## 有时候分隔符搞不定的，可以用正则表达式，将捕获的每组弄成一列</span>
<span class="n">dfc</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="nf">tibble</span><span class="p">(</span><span class="n">x</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;1-12week&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;1-10wk&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;5-12w&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;01-05weeks&quot;</span><span class="p">))</span>
<span class="n">dfc</span>

<span class="n">dfc</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span><span class="n">tidyr</span><span class="o">::</span><span class="nf">extract</span><span class="p">(</span>
<span class="w">  </span><span class="n">x</span><span class="p">,</span><span class="w"> </span>
<span class="w">  </span><span class="nf">c</span><span class="p">(</span><span class="s">&quot;start&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;end&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;letter&quot;</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;(\\d+)-(\\d+)([a-z]+)&quot;</span><span class="p">,</span>
<span class="w">  </span><span class="n">remove</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">FALSE</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 1</caption>
<thead>
	<tr><th scope=col>x</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1-12week  </td></tr>
	<tr><td>1-10wk    </td></tr>
	<tr><td>5-12w     </td></tr>
	<tr><td>01-05weeks</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 4</caption>
<thead>
	<tr><th scope=col>x</th><th scope=col>start</th><th scope=col>end</th><th scope=col>letter</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th></tr>
</thead>
<tbody>
	<tr><td>1-12week  </td><td>1 </td><td>12</td><td>week </td></tr>
	<tr><td>1-10wk    </td><td>1 </td><td>10</td><td>wk   </td></tr>
	<tr><td>5-12w     </td><td>5 </td><td>12</td><td>w    </td></tr>
	<tr><td>01-05weeks</td><td>01</td><td>05</td><td>weeks</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>
<section id="drop-na-replace-na">
<h1>删除缺失值所在行<code class="docutils literal notranslate"><span class="pre">drop_na()</span></code>与<code class="docutils literal notranslate"><span class="pre">replace_na()</span></code><a class="headerlink" href="#drop-na-replace-na" title="Link to this heading">#</a></h1>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">drop_na()</span></code>删除有缺失值的所有row，等效于<code class="docutils literal notranslate"><span class="pre">filter(across(everything(),</span> <span class="pre">~!is.na(.x)))</span></code>，可单独使用 <code class="docutils literal notranslate"><span class="pre">df</span> <span class="pre">%&gt;%</span> <span class="pre">drop_na()</span></code>删除<code class="docutils literal notranslate"><span class="pre">df</span></code>中的缺失值</p></li>
<li><p>也可指定某列，只删除该列存在缺失值的行</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">replace_na()</span></code> <code class="docutils literal notranslate"><span class="pre">coalesce()</span></code>替换缺失值 <code class="docutils literal notranslate"><span class="pre">x</span> <span class="pre">=</span> <span class="pre">replace_na(x,</span> <span class="pre">0)</span></code>将x列的缺失值替换为0, 可在<code class="docutils literal notranslate"><span class="pre">mutate()</span></code>等函数中使用</p></li>
</ul>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">&lt;-</span><span class="w"> </span><span class="n">tibble</span><span class="o">::</span><span class="nf">tribble</span><span class="p">(</span>
<span class="w">    </span><span class="o">~</span><span class="n">name</span><span class="p">,</span><span class="w">     </span><span class="o">~</span><span class="n">type</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="n">extra</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w">     </span><span class="m">80</span><span class="p">,</span><span class="w">     </span><span class="m">10</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Alice&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w">     </span><span class="kc">NA</span><span class="p">,</span><span class="w">      </span><span class="m">5</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w">     </span><span class="kc">NA</span><span class="p">,</span><span class="w">      </span><span class="m">9</span><span class="p">,</span>
<span class="w">    </span><span class="s">&quot;Bob&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w">     </span><span class="m">69</span><span class="p">,</span><span class="w">     </span><span class="kc">NA</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Carol&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;english&quot;</span><span class="p">,</span><span class="w">     </span><span class="m">80</span><span class="p">,</span><span class="w">     </span><span class="m">10</span><span class="p">,</span>
<span class="w">  </span><span class="s">&quot;Carol&quot;</span><span class="p">,</span><span class="w">    </span><span class="s">&quot;math&quot;</span><span class="p">,</span><span class="w">     </span><span class="m">90</span><span class="p">,</span><span class="w">      </span><span class="m">5</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1"># 如果score列中有缺失值NA，就删除所在的row</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">filter</span><span class="p">(</span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">score</span><span class="p">))</span>

<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">filter</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="o">!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">.x</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div><div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Using `across()` in `filter()` was deprecated in dplyr 1.0.8.
<span class=" -Color -Color-Cyan">ℹ</span> Please use `if_any()` or `if_all()` instead.”
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 所有列，如果有缺失值NA，就删除所在的row</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">filter</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">everything</span><span class="p">(),</span><span class="w"> </span><span class="o">~!</span><span class="nf">is.na</span><span class="p">(</span><span class="n">.x</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1"># 更简便的方法</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">drop_na</span><span class="p">()</span>
<span class="c1"># 也可指定某咧</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">drop_na</span><span class="p">(</span><span class="n">score</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Warning message:
“Using `across()` in `filter()` was deprecated in dplyr 1.0.8.
<span class=" -Color -Color-Cyan">ℹ</span> Please use `if_any()` or `if_all()` instead.”
</pre></div>
</div>
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 3 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 4 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="c1"># 将score替换为0分</span>
<span class="n">df</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">replace_na</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">coalesce</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="m">0</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Alice</td><td>math   </td><td>NA</td><td> 5</td></tr>
	<tr><td>Bob  </td><td>english</td><td>NA</td><td> 9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Alice</td><td>math   </td><td> 0</td><td> 5</td></tr>
	<tr><td>Bob  </td><td>english</td><td> 0</td><td> 9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Alice</td><td>math   </td><td> 0</td><td> 5</td></tr>
	<tr><td>Bob  </td><td>english</td><td> 0</td><td> 9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="n">extra</span><span class="p">),</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nf">replace_na</span><span class="p">(</span><span class="n">.x</span><span class="p">,</span><span class="m">0</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="nf">across</span><span class="p">(</span><span class="nf">c</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="n">extra</span><span class="p">),</span><span class="w"> </span><span class="o">~</span><span class="w"> </span><span class="nf">coalesce</span><span class="p">(</span><span class="n">.x</span><span class="p">,</span><span class="m">0</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Alice</td><td>math   </td><td> 0</td><td> 5</td></tr>
	<tr><td>Bob  </td><td>english</td><td> 0</td><td> 9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td> 0</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Alice</td><td>math   </td><td> 0</td><td> 5</td></tr>
	<tr><td>Bob  </td><td>english</td><td> 0</td><td> 9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69</td><td> 0</td></tr>
	<tr><td>Carol</td><td>english</td><td>80</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90</td><td> 5</td></tr>
</tbody>
</table>
</div></div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-r notranslate"><div class="highlight"><pre><span></span><span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">replace_na</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">))</span>
<span class="w">  </span><span class="p">)</span>

<span class="c1">## 也可用if_else()来做</span>
<span class="n">df</span><span class="w"> </span><span class="o">%&gt;%</span><span class="w"> </span>
<span class="w">  </span><span class="nf">mutate</span><span class="p">(</span>
<span class="w">    </span><span class="n">score</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nf">if_else</span><span class="p">(</span><span class="nf">is.na</span><span class="p">(</span><span class="n">score</span><span class="p">),</span><span class="w"> </span><span class="nf">mean</span><span class="p">(</span><span class="n">score</span><span class="p">,</span><span class="w"> </span><span class="n">na.rm</span><span class="o">=</span><span class="kc">TRUE</span><span class="p">),</span><span class="w"> </span><span class="n">score</span><span class="p">)</span>
<span class="w">  </span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80.00</td><td>10</td></tr>
	<tr><td>Alice</td><td>math   </td><td>79.75</td><td> 5</td></tr>
	<tr><td>Bob  </td><td>english</td><td>79.75</td><td> 9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69.00</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80.00</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90.00</td><td> 5</td></tr>
</tbody>
</table>
</div><div class="output text_html"><table class="dataframe">
<caption>A tibble: 6 × 4</caption>
<thead>
	<tr><th scope=col>name</th><th scope=col>type</th><th scope=col>score</th><th scope=col>extra</th></tr>
	<tr><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;chr&gt;</th><th scope=col>&lt;dbl&gt;</th><th scope=col>&lt;dbl&gt;</th></tr>
</thead>
<tbody>
	<tr><td>Alice</td><td>english</td><td>80.00</td><td>10</td></tr>
	<tr><td>Alice</td><td>math   </td><td>79.75</td><td> 5</td></tr>
	<tr><td>Bob  </td><td>english</td><td>79.75</td><td> 9</td></tr>
	<tr><td>Bob  </td><td>math   </td><td>69.00</td><td>NA</td></tr>
	<tr><td>Carol</td><td>english</td><td>80.00</td><td>10</td></tr>
	<tr><td>Carol</td><td>math   </td><td>90.00</td><td> 5</td></tr>
</tbody>
</table>
</div></div>
</div>
</section>

    <script type="text/x-thebe-config">
    {
        requestKernel: true,
        binderOptions: {
            repo: "binder-examples/jupyter-stacks-datascience",
            ref: "master",
        },
        codeMirrorConfig: {
            theme: "abcdef",
            mode: "r"
        },
        kernelOptions: {
            name: "ir",
            path: "./content"
        },
        predefinedOutput: true
    }
    </script>
    <script>kernelName = 'ir'</script>

                </article>
              

              
              
              
              
                <footer class="prev-next-footer">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <div class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">读取数据</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id2">数据科学中的文件管理</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#here"><code class="docutils literal notranslate"><span class="pre">here</span></code>宏包</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id3">数据处理</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mutata">1 新增一列 <code class="docutils literal notranslate"><span class="pre">mutata()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id4">2 管道 <code class="docutils literal notranslate"><span class="pre">%&gt;%</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#mutate">3 向量函数与<code class="docutils literal notranslate"><span class="pre">mutate()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id5">4 保存为新的数据框</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#select">5 选取列 <code class="docutils literal notranslate"><span class="pre">select()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#rename">6 修改列名 <code class="docutils literal notranslate"><span class="pre">rename()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#filter">7 筛选<code class="docutils literal notranslate"><span class="pre">filter()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#summarise">8 统计汇总<code class="docutils literal notranslate"><span class="pre">summarise()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#group-by">9 分组统计 <code class="docutils literal notranslate"><span class="pre">group_by()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#arrange">10 排序 <code class="docutils literal notranslate"><span class="pre">arrange()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#left-join">11 左联结 <code class="docutils literal notranslate"><span class="pre">left_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#right-join">12 右联结 <code class="docutils literal notranslate"><span class="pre">right_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#full-join">13 满联结 <code class="docutils literal notranslate"><span class="pre">full_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#inner-join">14 内联结<code class="docutils literal notranslate"><span class="pre">inner_join()</span></code></a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#semi-join-x-y-anti-join-x-y">15 筛选联结 <code class="docutils literal notranslate"><span class="pre">semi_join(x,y)</span></code> <code class="docutils literal notranslate"><span class="pre">anti_join(x,y)</span></code></a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#dplyr"><code class="docutils literal notranslate"><span class="pre">dplyr</span></code>进阶</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id6">导入数据</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id7">更多应用</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#separate">separate</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#unite">unite</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#distinct">distinct</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#na">有关NA的计算</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id8">拓展函数</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id9">强制转换</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#across"><code class="docutils literal notranslate"><span class="pre">across()</span></code>函数</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id10">数据中心化</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id11">数据标准化</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#id12">多列多个统计函数</a></li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#id13">数据规整</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#tidy-data"><code class="docutils literal notranslate"><span class="pre">tidy</span> <span class="pre">data</span></code>原则</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#fill"><code class="docutils literal notranslate"><span class="pre">fill()</span></code>缺失值填充</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#expand-complete"><code class="docutils literal notranslate"><span class="pre">expand()</span> </code>与 <code class="docutils literal notranslate"><span class="pre">complete()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#expand-grid-crossing"><code class="docutils literal notranslate"><span class="pre">expand_grid()</span> </code>与<code class="docutils literal notranslate"> <span class="pre">crossing()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#separate-unite"><code class="docutils literal notranslate"><span class="pre">separate()</span></code>与<code class="docutils literal notranslate"><span class="pre">unite()</span></code></a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#drop-na-replace-na">删除缺失值所在行<code class="docutils literal notranslate"><span class="pre">drop_na()</span></code>与<code class="docutils literal notranslate"><span class="pre">replace_na()</span></code></a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Lulu Shi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      © Copyright 2024.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="../_static/scripts/bootstrap.js?digest=8d27b9dea8ad943066ae"></script>
<script src="../_static/scripts/pydata-sphinx-theme.js?digest=8d27b9dea8ad943066ae"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>